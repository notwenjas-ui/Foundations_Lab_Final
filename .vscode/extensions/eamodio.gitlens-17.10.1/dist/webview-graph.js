exports.id=795,exports.ids=[795],exports.modules={4465(e,t,r){r.d(t,{GraphWebviewProvider:()=>GraphWebviewProvider});var i=r(1398),s=r(7529),o=r(7685),a=r(9554),n=r(4836),h=r(2740),l=r(9566),p=r(3783),c=r(1893),u=r(2531),d=r(114),g=r(9345),m=r(1300),f=r(6103),v=r(5467),y=r(5173),w=r(5067),b=r(5994),R=r(198),C=r(873),P=r(751),S=r(2742),G=r(6675),W=r(9389),_=r(4615),k=r(5582),D=r(735),I=r(7067),O=r(443),M=r(4003),T=r(4138),B=r(8881),H=r(7809),F=r(8256),x=r(3974),q=r(7663),A=r(5686),V=r(1608),L=r(9067),E=r(1044),z=r(4529),$=r(4713),U=r(4170),N=r(8075),Y=r(4161),j=r(6240),Q=r(256),Z=r(5049),J=r(4257),K=r(8986),X=r(6607),ee=r(5117),et=r(7775),er=r(8298),ei=r(1396),es=r(6742),eo=r(5993),ea=r(6066),en=r(6637),eh=r(8347),el=r(5162),ep=r(1654),ec=r(9701),eu=r(5362);async function ed(e){return e.length?(await Promise.allSettled(e.map(async e=>{let t=await e.git.remotes.getBestRemotesWithProviders(),r=t.find(e=>e.supportsIntegration())??t[0];return(0,eu.GS)(e,r)}))).map(e=>(0,ei.Ro)(e)).filter(e=>null!=e):[]}function eg(e){return null!=e&&(0,ea.sc)(e)&&("gitlens.graph"===e.webview||"gitlens.views.graph"===e.webview)}function em(e,t){return null!=e&&eg(e)&&"object"==typeof e.webviewItemValue&&e.webviewItemValue.type===t}function ef(e,t){return null!=e&&eg(e)&&"object"==typeof e.webviewItemValue&&"ref"in e.webviewItemValue&&(null==t||e.webviewItemValue.ref.refType===t)}function ev(e){return null!=e&&"object"==typeof e&&"ref"in e&&(0,F.cf)(e.ref)}var ey=r(2126);let ew="graph",eb=["upstream","pullRequest","issue"],eR=new ey.Q2(ew,"chooseRepository"),eC=new ey.Q2(ew,"dblclick"),eP=new ey.Q2(ew,"avatars/get"),eS=new ey.Q2(ew,"refs/metadata/get"),eG=new ey.Q2(ew,"rows/get"),eW=new ey.Q2(ew,"pullRequest/openDetails"),e_=new ey.Q2(ew,"row/action"),ek=new ey.Q2(ew,"search/openInView"),eD=new ey.Q2(ew,"search/cancel"),eI=new ey.Q2(ew,"columns/update"),eO=new ey.Q2(ew,"refs/update/visibility"),eM=new ey.Q2(ew,"filters/update/excludeTypes"),eT=new ey.Q2(ew,"configuration/update"),eB=new ey.Q2(ew,"search/update/mode"),eH=new ey.Q2(ew,"filters/update/includedRefs"),eF=new ey.Q2(ew,"selection/update"),ex=new ey.Oz(ew,"jumpToHead"),eq=new ey.Oz(ew,"chooseRef"),eA=new ey.Oz(ew,"chooseComparison"),eV=new ey.Oz(ew,"chooseAuthor"),eL=new ey.Oz(ew,"chooseFile"),eE=new ey.Oz(ew,"rows/ensure"),ez=new ey.Oz(ew,"search/history/get"),e$=new ey.Oz(ew,"search/history/store"),eU=new ey.Oz(ew,"search/history/delete"),eN=new ey.Oz(ew,"counts"),eY=new ey.Oz(ew,"row/hover/get"),ej=new ey.Oz(ew,"search"),eQ=new ey.C1(ew,"repositories/integration/didChange"),eZ=new ey.C1(ew,"didChange",!0),eJ=new ey.C1(ew,"configuration/didChange"),eK=new ey.C1(ew,"subscription/didChange"),eX=new ey.C1(ew,"org/settings/didChange"),e0=new ey.C1(ew,"avatars/didChange"),e1=new ey.C1(ew,"mcp/didChange"),e2=new ey.C1(ew,"branchState/didChange"),e5=new ey.C1(ew,"refs/didChangeMetadata"),e6=new ey.C1(ew,"columns/didChange"),e3=new ey.C1(ew,"scrollMarkers/didChange"),e4=new ey.C1(ew,"refs/didChangeVisibility"),e7=new ey.C1(ew,"rows/didChange"),e9=new ey.C1(ew,"rows/stats/didChange"),e8=new ey.C1(ew,"selection/didChange"),te=new ey.C1(ew,"workingTree/didChange"),tt=new ey.C1(ew,"didSearch"),tr=new ey.C1(ew,"didFetch"),ti=new ey.C1(ew,"featurePreview/didStart");let SearchHistory=class SearchHistory{constructor(e,t){this.storage=e,this.repoPath=t}async delete(e){if(!e?.trim()||!this.repoPath)return;let t=`graph:searchHistory:${this.repoPath}`,r=this.storage.getWorkspace(t)??[],i=r.filter(t=>t.query!==e);i.length<r.length&&await this.storage.storeWorkspace(t,i)}get(){if(!this.repoPath)return[];let e=`graph:searchHistory:${this.repoPath}`;return(this.storage.getWorkspace(e)??[]).map(e=>({query:e.query,matchAll:e.matchAll,matchCase:e.matchCase,matchRegex:e.matchRegex,matchWholeWord:e.matchWholeWord,naturalLanguage:e.naturalLanguage?{query:e.query,processedQuery:e.nlStructuredQuery}:void 0}))}async store(e){if(!e.query?.trim()||!this.repoPath)return;let t=`graph:searchHistory:${this.repoPath}`,r=this.storage.getWorkspace(t)??[],i=e.naturalLanguage?e.query:ts(e.query),s=ts(i),o=r.findIndex(e=>ts((e.naturalLanguage,e.query))===s);o>=0&&r.splice(o,1);let a=[{query:e.query,matchAll:e.matchAll,matchCase:e.matchCase,matchRegex:e.matchRegex,matchWholeWord:e.matchWholeWord,naturalLanguage:!!e.naturalLanguage||void 0,nlStructuredQuery:e.naturalLanguage&&"boolean"!=typeof e.naturalLanguage?e.naturalLanguage.processedQuery:void 0},...r];await this.storage.storeWorkspace(t,a.slice(0,50))}};function ts(e,t=!1){let r=e.trim().replace(/\s+/g," ");return/\bauthor:\s*@?me\b/i.test(r)&&(r=r.replace(/(^|\s)@me(\s|$)/gi," ").replace(/\s+/g," ").trim()),r.toLowerCase()}var to=Object.defineProperty,ta=Object.getOwnPropertyDescriptor,tn=(e,t)=>(t=Symbol[e])?t:Symbol.for("Symbol."+e),th=e=>{throw TypeError(e)},tl=(e,t,r,i)=>{for(var s,o=i>1?void 0:i?ta(t,r):t,a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i?s(t,r,o):s(o))||o);return i&&o&&to(t,r,o),o},tp=(e,t,r)=>{if(null!=t){var i,s;"object"!=typeof t&&"function"!=typeof t&&th("Object expected"),r&&(i=t[tn("asyncDispose")]),void 0===i&&(i=t[tn("dispose")],r&&(s=i)),"function"!=typeof i&&th("Object not disposable"),s&&(i=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.push([r,i,t])}else r&&e.push([r]);return t},tc=(e,t,r)=>{var i="function"==typeof SuppressedError?SuppressedError:function(e,t,r,i){return(i=Error(r)).name="SuppressedError",i.error=e,i.suppressed=t,i},s=e=>t=r?new i(e,t,"An error was suppressed during disposal"):(r=!0,e),o=i=>{for(;i=e.pop();)try{var a=i[1]&&i[1].call(i[2]);if(i[0])return Promise.resolve(a).then(o,e=>(s(e),o()))}catch(e){s(e)}if(r)throw t};return o()};let tu={ref:{width:130,isHidden:!1,order:0},graph:{width:150,mode:void 0,isHidden:!1,order:1},message:{width:300,isHidden:!1,order:2},author:{width:130,isHidden:!1,order:3},changes:{width:200,isHidden:!1,order:4},datetime:{width:130,isHidden:!1,order:5},sha:{width:130,isHidden:!1,order:6}},td={ref:{width:32,isHidden:!1},graph:{width:150,mode:"compact",isHidden:!1},author:{width:32,isHidden:!1,order:2},message:{width:500,isHidden:!1,order:3},changes:{width:200,isHidden:!1,order:4},datetime:{width:130,isHidden:!0,order:5},sha:{width:130,isHidden:!1,order:6}},{command:tg,getCommands:tm}=(0,J.V)();let GraphWebviewProvider=class GraphWebviewProvider{constructor(e,t){this.container=e,this.host=t,this._showDetailsView=U.H.get("graph.showDetailsView"),this._theme=i.window.activeColorTheme,this.ensureRepositorySubscriptions(),this._disposable=i.Disposable.from(U.H.onDidChange(this.onConfigurationChanged,this),this.container.subscription.onDidChange(this.onSubscriptionChanged,this),this.container.storage.onDidChange(this.onStorageChanged,this),(0,N.wt)(this.onContextChanged,this),this.container.subscription.onDidChangeFeaturePreview(this.onFeaturePreviewChanged,this),this.container.git.onDidChangeRepositories(async()=>{this._etag!==this.container.git.etag&&(null==this._discovering||(this._etag=await this._discovering,this._etag!==this.container.git.etag))&&this.updateState()}),i.window.onDidChangeActiveColorTheme(this.onThemeChanged,this),{dispose:()=>{null!=this._repositoryEventsDisposable&&(this._repositoryEventsDisposable.dispose(),this._repositoryEventsDisposable=void 0)}},this.container.integrations.onDidChangeConnectionState(this.onIntegrationConnectionChanged,this))}_repository;get repository(){return this._repository}set repository(e){this._repository===e?this.ensureRepositorySubscriptions():(this._repository=e,this.resetRepositoryState(),this.ensureRepositorySubscriptions(!0),this.host.ready&&this.updateState())}_selection;get activeSelection(){return this._selection?.[0]}_cancellations=new Map;_discovering;_disposable;_etag;_etagSubscription;_etagRepository;_firstSelection=!0;_getBranchesAndTagsTips;_graph;_hoverCache=new Map;_ipcNotificationMap=new Map([[e6,this.notifyDidChangeColumns],[eJ,this.notifyDidChangeConfiguration],[eZ,this.notifyDidChangeState],[e4,this.notifyDidChangeRefsVisibility],[e3,this.notifyDidChangeScrollMarkers],[e8,this.notifyDidChangeSelection],[eK,this.notifyDidChangeSubscription],[te,this.notifyDidChangeWorkingTree],[tr,this.notifyDidFetch],[ti,this.notifyDidStartFeaturePreview]]);_refsMetadata;_search;_searchIdCounter=(0,Z.N)();_selectedId;_honorSelectedId=!1;_selectedRows;_showDetailsView;_theme;_repositoryEventsDisposable;_lastFetchedDisposable;_searchHistory;isWindowFocused=!0;dispose(){this._disposable.dispose()}canReuseInstance(...e){let t;if(1===this.container.git.openRepositoryCount)return!0;let[r]=e;return(0,P.Z6)(r)?t=r:ev(r)?t=this.container.git.getRepository(r.ref.repoPath):(0,ep.c)(r)&&null!=r.state.selectedRepository&&(t=this.container.git.getRepository(r.state.selectedRepository)),t?.uri.toString()===this.repository?.uri.toString()||void 0}getSplitArgs(){return null!=this.repository?[this.repository]:[]}getTelemetryContext(){return{...this.host.getTelemetryContext(),"context.repository.id":this.repository?.idHash,"context.repository.scheme":this.repository?.uri.scheme,"context.repository.closed":this.repository?.closed,"context.repository.folder.scheme":this.repository?.folder?.uri.scheme,"context.repository.provider.id":this.repository?.provider.id}}getShownTelemetryContext(){let e={},t=this.getColumns();if(null!=t)for(let[r,i]of Object.entries(t))i.isHidden||(e[`context.column.${r}.visible`]=!0),null!=i.mode&&(e[`context.column.${r}.mode`]=i.mode);let r=(0,er.Bq)(U.H.get("graph"),"context.config",{joinArrays:!0});return{...this.getTelemetryContext(),...e,...r}}_searchRequest;async onShowing(e,t,...r){this._firstSelection=!0,this._etag=this.container.git.etag,this.container.git.isDiscoveringRepositories&&(this._discovering=this.container.git.isDiscoveringRepositories.then(e=>(this._discovering=void 0,e)),this._etag=await this._discovering);let[i]=r;if((0,P.Z6)(i))this.repository=i;else if(ev(i)){this.repository=this.container.git.getRepository(i.ref.repoPath);let e=i.ref.ref;if((0,x.HH)(e)||(e=(await this.container.git.getRepositoryService(i.ref.repoPath).revision.resolveRevision(e)).sha),this._honorSelectedId=!0,this.setSelectedRows(e),null!=this._graph){if(this._graph?.ids.has(e))return this.notifyDidChangeSelection(),[!0,this.getShownTelemetryContext()];this.onGetMoreRows({id:e},!0)}}else if(i?.repository!=null&&i?.search!=null)this.repository=i.repository,this._searchRequest=i.search,this.updateState();else if((0,ep.c)(i)&&null!=i.state.selectedRepository&&(this.repository=this.container.git.getRepository(i.state.selectedRepository)),null==this.repository&&this.container.git.repositoryCount>1){let[t]=(0,o.qU)("gitlens.showGraph",void 0,...r);"scm"===t.type&&null!=t.scm.rootUri?this.repository=this.container.git.getRepository(t.scm.rootUri):"viewItem"===t.type&&t.node instanceof eh.P&&(this.repository=t.node.repo),null!=this.repository&&!e&&this.host.ready&&this.updateState()}return[!0,this.getShownTelemetryContext()]}onRefresh(e){e&&this.resetRepositoryState()}includeBootstrap(e){return this.getState(!0)}registerCommands(){let e=[];for(let t of(this.host.is("view")&&e.push((0,$.Lb)(`${this.host.id}.refresh`,()=>this.host.refresh(!0)),(0,$.Lb)(`${this.host.id}.openInTab`,()=>void(0,$.RS)("gitlens.showGraphPage",void 0,this.repository))),tm()))e.push(this.host.registerWebviewCommand((0,J.L)(t.command,this.host.type),t.handler.bind(this)));return e}onWindowFocusChanged(e){this.isWindowFocused=e}onFocusChanged(e){this._showActiveSelectionDetailsDebounced?.cancel(),e&&null!=this.activeSelection&&(this.container.views.commitDetails.visible||this.container.views.graphDetails.visible)&&this.showActiveSelectionDetails()}onVisibilityChanged(e){if(e||this._showActiveSelectionDetailsDebounced?.cancel(),e&&(null!=this.repository&&this.repository.etag!==this._etagRepository||this.container.subscription.etag!==this._etagSubscription)){this.host.ready&&this.updateState(!0);return}if(e){this.host.sendPendingIpcNotifications();let{activeSelection:e}=this;if(null==e)return;this.showActiveSelectionDetails()}}async onGetCounts(){if(null==this._graph)return;let e=await this.container.git.getRepositoryService(this._graph.repoPath).tags.getTags();return{branches:(0,et.U9)(this._graph.branches?.values(),e=>!e.remote),remotes:this._graph.remotes.size,stashes:this._graph.stashes?.size,worktrees:null!=this._graph.worktrees?this._graph.worktrees.length-1:void 0,tags:e.values.length}}onUpdateGraphConfig(e){let t,r=this.getComponentConfig();for(t in e.changes)if(r[t]!==e.changes[t])switch(t){case"minimap":U.H.updateEffective("graph.minimap.enabled",e.changes[t]);break;case"minimapDataType":U.H.updateEffective("graph.minimap.dataType",e.changes[t]);break;case"minimapMarkerTypes":{let r=[];for(let i of e.changes[t]??[])switch(i){case"localBranches":case"remoteBranches":case"stashes":case"tags":case"pullRequests":r.push(i)}U.H.updateEffective("graph.minimap.additionalTypes",r);break}case"dimMergeCommits":U.H.updateEffective("graph.dimMergeCommits",e.changes[t]);break;case"onlyFollowFirstParent":U.H.updateEffective("graph.onlyFollowFirstParent",e.changes[t])}}onUpdateGraphSearchMode(e){this.container.storage.store("graph:searchMode",e.searchMode).catch(),this.container.storage.store("graph:useNaturalLanguageSearch",e.useNaturalLanguage).catch(),tb(this.container,this._search,e.searchMode)}_showActiveSelectionDetailsDebounced=void 0;showActiveSelectionDetails(){this._showActiveSelectionDetailsDebounced??=(0,X.s)(this.showActiveSelectionDetailsCore.bind(this),250),this._showActiveSelectionDetailsDebounced()}showActiveSelectionDetailsCore(){let{activeSelection:e}=this;null!=e&&this.host.active&&this.container.events.fire("commit:selected",{commit:e,interaction:"passive",preserveFocus:!0,preserveVisibility:!1===this._showDetailsView,searchContext:this.getSearchContext(e.ref)},{source:this.host.id})}getSearchContext(e){if(!this._search?.queryFilters.files||null==e)return;let t=this._search.results.get(e);return{query:this._search.query,queryFilters:this._search.queryFilters,matchedFiles:t?.files??[],hiddenFromGraph:this._selectedRows?.[e]?.hidden??!1}}onConfigurationChanged(e){(U.H.changed(e,"graph.showDetailsView")&&(this._showDetailsView=U.H.get("graph.showDetailsView")),U.H.changed(e,"graph.commitOrdering"))?this.updateState():(U.H.changed(e,"advanced.abbreviatedShaLength")||U.H.changed(e,"ai.enabled")||U.H.changed(e,"defaultDateFormat")||U.H.changed(e,"defaultDateStyle")||U.H.changed(e,"graph"))&&(this.notifyDidChangeConfiguration(),(U.H.changed(e,"graph.onlyFollowFirstParent")||(U.H.changed(e,"graph.minimap.enabled")||U.H.changed(e,"graph.minimap.dataType"))&&U.H.get("graph.minimap.enabled")&&"lines"===U.H.get("graph.minimap.dataType")&&!this._graph?.includes?.stats)&&this.updateState())}onContextChanged(e){["gitlens:gk:organization:ai:enabled","gitlens:gk:organization:drafts:enabled"].includes(e)&&this.notifyDidChangeOrgSettings()}getOrgSettings(){return{ai:(0,N.SD)("gitlens:gk:organization:ai:enabled",!0),drafts:(0,N.SD)("gitlens:gk:organization:drafts:enabled",!1)}}onFeaturePreviewChanged(e){"graph"===e.feature&&this.notifyDidStartFeaturePreview(e)}getFeaturePreview(){return this.container.subscription.getFeaturePreview("graph")}onRepositoryChanged(e){if(!e.changed(P.Z_.Config,P.Z_.Head,P.Z_.Heads,P.Z_.Remotes,P.Z_.Starred,P.Z_.Stash,P.Z_.PausedOperationStatus,P.Z_.Tags,P.Z_.Unknown,P.Ti.Any)){this._etagRepository=e.repository.etag;return}if(e.changed(P.Z_.Config,P.Ti.Any)&&null!=this._refsMetadata)for(let[,e]of this._refsMetadata)null!=e&&(e.issue=void 0);e.changed(P.Z_.Head,P.Ti.Any)&&this.setSelectedRows(void 0),this.updateState(!e.changed(P.Z_.Unknown,P.Ti.Exclusive))}onRepositoryFileSystemChanged(e){e.repository.id===this.repository?.id&&this.notifyDidChangeWorkingTree()}onSubscriptionChanged(e){e.etag!==this._etagSubscription&&(this._etagSubscription=e.etag,this.notifyDidChangeSubscription())}onStorageChanged(e){"global"===e.type&&e.keys.includes("mcp:banner:dismissed")&&this.onMcpBannerChanged()}onMcpBannerChanged(){this.host.visible&&this.host.notify(e1,this.getMcpBannerCollapsed())}getMcpBannerCollapsed(){return!(0,q.W$)(this.container)}onThemeChanged(e){null!=this._theme&&((0,j.g4)(e)&&(0,j.g4)(this._theme)||(0,j.kH)(e)&&(0,j.kH)(this._theme))||(this._theme=e,this.updateState())}onColumnsChanged(e){this.updateColumns(e.config);let t={};for(let[r,i]of Object.entries(e.config))for(let[e,s]of Object.entries(i))t[`column.${r}.${e}`]=s;this.host.sendTelemetryEvent("graph/columns/changed",t)}onRefsVisibilityChanged(e){this.updateExcludedRefs(this._graph?.repoPath,e.refs,e.visible)}onDoubleClick(e){if("ref"===e.type&&e.ref.context){let t=this.getGraphItemContext(e.ref.context);if(ef(t)){if(null!=e.metadata){if(t=this.getGraphItemContext(e.metadata.data.context),"upstream"===e.metadata.type&&em(t,"upstreamStatus")){let{ahead:e,behind:r,ref:i}=t.webviewItemValue;if(r>0)return void d.a$(i.repoPath,i);if(e>0)return void d.VC(i.repoPath,!1,i)}else if("pullRequest"===e.metadata.type&&em(t,"pullrequest"))return void this.openPullRequestOnRemote(t);else if("issue"===e.metadata.type&&em(t,"issue"))return void this.openIssueOnRemote(t);return}let{ref:r}=t.webviewItemValue;return"head"===e.ref.refType&&e.ref.isCurrentHead?d.S_(r.repoPath):d.S_(r.repoPath,r,!!U.H.isUnset("gitCommands.skipConfirmations")||void 0)}}else if("row"===e.type&&e.row){this._showActiveSelectionDetailsDebounced?.cancel();let t=this.getRevisionReference(this.repository?.path,e.row.id,e.row.type);if(null!=t){let r=this.getSearchContext(e.row.id);this.container.events.fire("commit:selected",{commit:t,interaction:"active",preserveFocus:e.preserveFocus,preserveVisibility:!1,searchContext:r},{source:this.host.id});let i=this.host.is("editor")?this.container.views.commitDetails:this.container.views.graphDetails;i.ready||i.show({preserveFocus:e.preserveFocus},{commit:t,interaction:"active",preserveVisibility:!1,searchContext:r})}}return Promise.resolve()}async onHoverRowRequest(e){let t={id:e.id,markdown:void 0};if(this.cancelOperation("hover"),null!=this._graph){let r=e.id,i=this._hoverCache.get(r);if(null==i){let t,s=this.createCancellation("hover"),o=!0;try{let r=this.container.git.getRepositoryService(this._graph.repoPath);switch(e.type){case"work-dir-changes":o=!1,t=await r.commits.getCommit(S.SU,s.token);break;case"stash-node":{let i=await r.stash?.getStash(void 0,s.token);t=i?.stashes.get(e.id);break}default:t=await r.commits.getCommit(e.id,s.token)}}catch(e){if(!(e instanceof n.AL))throw e}if(null!=t&&!s.token.isCancellationRequested){let e=this._graph.rowsStats?.get(t.sha);null!=e&&(t=t.with({stats:{...t.stats,additions:e.additions,deletions:e.deletions,files:t.stats?.files?t.stats.files:e.files}})),i=this.getCommitTooltip(t,s.token).catch(e=>{throw this._hoverCache.delete(r),e}),o&&this._hoverCache.set(r,i)}}if(null!=i)try{t.markdown={status:"fulfilled",value:await i}}catch(e){t.markdown={status:"rejected",reason:e}}}return t.markdown??={status:"rejected",reason:new n.AL},t}async getCommitTooltip(e,t){let r,i,s=U.H.get(`views.formats.${(0,b.kk)(e)?"stashes":"commits"}.tooltip`),o=U.H.get("signing.showSignatureBadges")&&!e.isUncommitted&&w.c.has(s,"signature"),a=this.container.git.getRepositoryService(e.repoPath),[h,l,p]=await Promise.allSettled([a.remotes.getBestRemotesWithProviders(),e.ensureFullDetails({include:{stats:!0}}),o?e.isSigned():void 0]);if(t.isCancellationRequested)throw new n.AL;let c=(0,ei.Ro)(h,[]),[u]=c,d=(0,ei.Ro)(p);if(u?.supportsIntegration()){let[s,o]=await Promise.allSettled([(0,ei.zu)(e.getEnrichedAutolinks(u),t),e.getAssociatedPullRequest(u)]);if(t.isCancellationRequested)throw new n.AL;let a=(0,ei.Ro)(s);a?.paused||(r=a?.value),i=(0,ei.Ro)(o)}return this._getBranchesAndTagsTips??=await a.getBranchesAndTagsTipsLookup(),await w.c.fromTemplateAsync(s,e,{source:"graph"},{enrichedAutolinks:r,dateFormat:U.H.get("defaultDateFormat"),getBranchAndTagTips:this._getBranchesAndTagsTips,messageAutolinks:!0,messageIndent:4,pullRequest:i,outputFormat:"markdown",remotes:c,signed:d})}async onEnsureRowRequest(e){let t;return null==this._graph?{id:void 0}:(this._graph.ids.has(e.id)?t=e.id:(await this.updateGraphWithMoreRows(this._graph,e.id,this._search),this.notifyDidChangeRows(),this._graph.ids.has(e.id)&&(t=e.id)),{id:t})}async onGetMissingAvatars(e){if(null==this._graph)return;let t=this._graph.repoPath;async function r(e,r){let i=await (0,s.m_)(e,{ref:r,repoPath:t});this._graph.avatars.set(e,i.toString(!0))}let i=[];for(let[t,s]of Object.entries(e.emails))this._graph.avatars.has(t)||i.push(r.call(this,t,s));i.length&&(await Promise.allSettled(i),this.updateAvatars())}async onGetMissingRefMetadata(e){if(null==this._graph||null===this._refsMetadata||!(0,N.SD)("gitlens:repos:withHostingIntegrationsConnected")?.includes(this._graph.repoPath))return;let t=this._graph.repoPath;async function r(e,r){null==this._refsMetadata&&(this._refsMetadata=new Map);let i=(await this.container.git.getRepositoryService(t).branches.getBranches({filter:t=>t.id===e}))?.values?.[0],s={...this._refsMetadata.get(e)};if(null==i){for(let t of r)s[t]=null,this._refsMetadata.set(e,s);return}for(let o of r){if(!eb.includes(o)){s[o]=null,this._refsMetadata.set(e,s);continue}if("pullRequest"===o){let r=await i?.getAssociatedPullRequest();if(null==r){(void 0===s.pullRequest||s.pullRequest?.length===0)&&(s.pullRequest=null),this._refsMetadata.set(e,s);continue}let o=function(e){switch(e){case"github":case"github":case ec.$r.GitHub:return"github";case"cloud-github-enterprise":case"githubEnterprise":case ec.RR.CloudGitHubEnterprise:return"githubEnterprise";case"gitlab":case"gitlab":case ec.$r.GitLab:return"gitlab";case"cloud-gitlab-self-hosted":case"gitlabSelfHosted":case ec.RR.CloudGitLabSelfHosted:return"gitlabSelfHosted";case"azure-devops":case"azureDevops":case"azure":case ec.$r.AzureDevOps:case ec.RR.AzureDevOpsServer:return"azureDevops";case"bitbucket":case"bitbucket":case ec.$r.Bitbucket:return"bitbucket";case"bitbucket-server":case"bitbucketServer":case ec.RR.BitbucketServer:return"bitbucketServer";default:return}}(r.provider.id);if(null==o)continue;s.pullRequest=[{hostingServiceType:o,id:Number.parseInt(r.id)||0,title:r.title,author:r.author.name,date:(r.mergedDate??r.closedDate??r.updatedDate)?.getTime(),state:r.state,url:r.url,context:(0,ea.C9)({webviewItem:`gitlens:pullrequest${r.refs?"+refs":""}`,webviewItemValue:{type:"pullrequest",id:r.id,url:r.url,repoPath:t,refs:r.refs,provider:{id:r.provider.id,name:r.provider.name,domain:r.provider.domain,icon:r.provider.icon}}})}],this._refsMetadata.set(e,s),i?.upstream?.missing&&this._refsMetadata.set((0,M.Yk)(t,!0,i.upstream.name),s);continue}if("upstream"===o){let t=i?.upstream;if(null==t||t.missing){s.upstream=null,this._refsMetadata.set(e,s);continue}s.upstream={name:(0,M.km)(t.name),owner:(0,M.Zq)(t.name),ahead:i.upstream?.state.ahead??0,behind:i.upstream?.state.behind??0,context:(0,ea.C9)({webviewItem:"gitlens:upstreamStatus",webviewItemValue:{type:"upstreamStatus",ref:(0,I.iw)(i),ahead:i.upstream?.state.ahead??0,behind:i.upstream?.state.behind??0}})},this._refsMetadata.set(e,s);continue}if("issue"===o){let t=await (0,_.GI)(this.container,i).then(e=>e.value);if(!t?.length&&(t=await i.getEnrichedAutolinks().then(async e=>{if(null!=e)return(await Promise.all([...e.values()].map(async([e])=>null!=e?await e:void 0))).filter(e=>null!=e&&e instanceof Object&&"type"in e&&"issue"===e.type)}),!t?.length)){s.issue=null,this._refsMetadata.set(e,s);continue}let r=[];for(let e of t){let t=function(e){switch(e){case"github":case"github":case ec.$r.GitHub:return"github";case"cloud-github-enterprise":case"githubEnterprise":case ec.RR.CloudGitHubEnterprise:return"githubEnterprise";case"gitlab":case"gitlab":case ec.$r.GitLab:return"gitlab";case"cloud-gitlab-self-hosted":case"gitlabSelfHosted":case ec.RR.CloudGitLabSelfHosted:return"gitlabSelfHosted";case"azure-devops":case"azureDevops":case"azure":case ec.$r.AzureDevOps:return"azureDevops";case"bitbucket":case"bitbucket":case ec.$r.Bitbucket:return"bitbucket";case ec.NN.Jira:return"jiraCloud";case ec.NN.Linear:return"linear";default:return}}(e.provider.id);null!=t&&r.push({issueTrackerType:t,displayId:e.id,id:e.nodeId??e.id,title:`${e.title}
Double-click to open issue on ${e.provider.name}`,context:(0,ea.C9)({webviewItem:"gitlens:issue",webviewItemValue:{type:"issue",id:e.id,url:e.url,provider:{id:e.provider.id,name:e.provider.name,domain:e.provider.domain,icon:e.provider.icon}}})})}s.issue=r,this._refsMetadata.set(e,s)}}}let i=[];for(let t of Object.keys(e.metadata))i.push(r.call(this,t,e.metadata[t]));i.length&&await Promise.allSettled(i),this.updateRefsMetadata()}async onGetMoreRows(e,t=!1){if(this._graph?.paging!=null){if(this._graph?.more==null||this.repository?.etag!==this._etagRepository)return void this.updateState(!0);await this.updateGraphWithMoreRows(this._graph,e.id,this._search),this.notifyDidChangeRows(t)}}async onOpenPullRequestDetails(e){let t=this.repository;if(null==t)return;let r=await t.git.branches.getBranch();if(null==r)return;let i=await r.getAssociatedPullRequest();if(null!=i)return this.container.views.pullRequest.showPullRequest(i,r)}async onRowAction(e){let t=this._graph?.repoPath;if(null!=t)switch(e.action){case"compose-commits":await (0,$.RS)("gitlens.composeCommits",{repoPath:t,source:"graph"});break;case"generate-commit-message":await (0,$.RS)("gitlens.ai.generateCommitMessage",{repoPath:t,source:"graph"});break;case"stash-save":await g.VC(t)}}onSearchHistoryGetRequest(){this._searchHistory??=new SearchHistory(this.container.storage,this.repository?.path);try{return{history:this._searchHistory.get()}}catch{return{history:[]}}}async onSearchHistoryStoreRequest(e){this._searchHistory??=new SearchHistory(this.container.storage,this.repository?.path);try{await this._searchHistory.store(e.search)}finally{return{history:this._searchHistory.get()}}}async onSearchHistoryDeleteRequest(e){this._searchHistory??=new SearchHistory(this.container.storage,this.repository?.path);try{await this._searchHistory.delete(e.query)}finally{return{history:this._searchHistory.get()}}}onSearchCancel(e){this.cancelOperation("search"),e.preserveResults||(this._searchIdCounter.next(),this.resetSearchState(),this.host.notify(tt,{search:void 0,results:void 0,partial:!1,searchId:this._searchIdCounter.current}))}async onSearchRequest(e){var t=[];try{let r,i,s=tp(t,new es.e(`GraphWebviewProvider.onSearchRequest(${this.host.id})`));e.search?.naturalLanguage&&(e.search=await (0,W.I)(this.container,e.search,{source:"graph"}));let o=e.search?(0,G.OM)(e.search):void 0,a=null!=o?(0,et.fj)(o.operations.keys(),","):"";try{return r=await this.searchGraphOrContinue(e,!0)}catch(t){return i=t,{search:e.search,results:(0,n.MB)(t)?void 0:{error:t instanceof y.Do?"Invalid search pattern":"Unexpected error"},partial:!1,searchId:this._searchIdCounter.current}}finally{let e=(0,n.MB)(i);this.host.sendTelemetryEvent("graph/searched",{types:a,duration:s.elapsed(),matches:r?.results?.count??0,failed:null!=i,"failed.reason":null!=i?e?"cancelled":"error":void 0,"failed.error":e||null==i?void 0:String(i),"failed.error.detail":e||i?.original==null?void 0:String(i?.original)})}}catch(e){var r=e,i=!0}finally{tc(t,r,i)}}async searchGraphOrContinue(e,t=!0){let r=this._search,i=this._graph;if(e.more&&r?.paging?.cursor!=null&&r.comparisonKey===(0,G.b4)(e.search)){if(null==this.repository)return{search:e.search,results:{error:"No repository"},partial:!1,searchId:this._searchIdCounter.current};let n=this._searchIdCounter.current,h=this.createCancellation("search");try{var s=[];try{let o=this.repository.git.graph.continueSearchGraph(r.paging.cursor,r.results,{limit:e.limit??U.H.get("graph.searchItemLimit")??0},h.token);if(tp(s,(0,eo.Nx)(()=>void o.return?.(void 0))),r=await this.processSearchStream(o,n,t,i),null!=r)return{search:e.search,results:this.getSearchResultsData(r),partial:!1,searchId:this._searchIdCounter.current};return{search:e.search,results:void 0,partial:!1,searchId:this._searchIdCounter.current}}catch(e){var o=e,a=!0}finally{tc(s,o,a)}}finally{h.dispose()}}let n=!1;if(r?.comparisonKey!==(0,G.b4)(e.search)){if(null==this.repository)return{search:e.search,results:{error:"No repository"},partial:!1,searchId:this._searchIdCounter.current};this.repository.etag!==this._etagRepository&&this.updateState(!0);let s=this._searchIdCounter.next();this._search=void 0,this.host.notify(tt,{search:e.search,results:void 0,partial:!1,searchId:s});let o=this.createCancellation("search");try{var h=[];try{let a=this.repository.git.graph.searchGraph(e.search,{limit:U.H.get("graph.searchItemLimit")??0,ordering:U.H.get("graph.commitOrdering")},o.token);if(tp(h,(0,eo.Nx)(()=>void a.return?.(void 0))),r=await this.processSearchStream(a,s,t,i,{selectFirstResult:!0}),null==r)throw Error("Search generator completed without returning a result")}catch(e){var l=e,p=!0}finally{tc(h,l,p)}}catch(e){throw this._search=void 0,e}this._search=tb(this.container,r)}else{if(r=this._search,!n){let e=await this.ensureSearchStartsInRange(i,r.results);null!=e&&(this.setSelectedRows(e),n=!0)}null!=this._searchIdCounter.current&&t&&!e.more&&this.host.notify(tt,{search:r.query,results:this.getSearchResultsData(r)??{count:0,hasMore:!1,commitsLoaded:{count:0}},selectedRows:n?tw(this._selectedRows):void 0,partial:!1,searchId:this._searchIdCounter.current})}return{search:r.query,results:this.getSearchResultsData(r)??{count:0,hasMore:!1,commitsLoaded:{count:0}},selectedRows:n?tw(this._selectedRows):void 0,partial:!1,searchId:this._searchIdCounter.current}}async processSearchStream(e,t,r,i,s){let o,a,n=!1;for(;!(a=await e.next()).done;){let e;if(t!==this._searchIdCounter.current)break;let h=a.value;if(h.results.size){if(o?.results!=null){for(let[e,t]of h.results)o.results.set(e,t);o={repoPath:o.repoPath,query:o.query,queryFilters:o.queryFilters,comparisonKey:o.comparisonKey,results:o.results,hasMore:h.hasMore}}else o={repoPath:h.repoPath,query:h.query,queryFilters:h.queryFilters,comparisonKey:h.comparisonKey,results:new Map(h.results),hasMore:h.hasMore};if(this._search=tb(this.container,o),s?.selectFirstResult&&!n){let t=await this.ensureSearchStartsInRange(i,h.results);null!=t&&(this.setSelectedRows(t),e=tw(this._selectedRows),n=!0)}r&&this.host.notify(tt,{search:this._search.query,results:this.getSearchResultsData(h),selectedRows:e,partial:!0,searchId:t})}}return a?.value!=null&&(o=a.value,this._search=tb(this.container,o),await this.ensureSearchStartsInRange(i,o.results),t===this._searchIdCounter.current&&r&&this.host.notify(tt,{search:this._search.query,results:this.getSearchResultsData(o)??{count:0,hasMore:!1,commitsLoaded:{count:0}},selectedRows:s?.selectFirstResult&&n?tw(this._selectedRows):void 0,partial:!1,searchId:t})),o}onSearchOpenInView(e){null!=this.repository&&this.container.views.searchAndCompare.search(this.repository.path,e.search,{label:{label:`for ${e.search.query}`},reveal:{select:!0,focus:!1,expand:!0}})}async onChooseRepository(){let{title:e,placeholder:t}=(0,z.Nt)(this.container.git.openRepositories,"Switch",this.repository?.name),r=await (0,z.oe)(this.container,e,t,this.container.git.openRepositories,{picked:this.repository});null!=r&&(this.repository=r,this.host.sendTelemetryEvent("graph/repository/changed",{"repository.id":this.repository?.idHash,"repository.scheme":this.repository?.uri.scheme,"repository.closed":this.repository?.closed,"repository.folder.scheme":this.repository?.folder?.uri.scheme,"repository.provider.id":this.repository?.provider.id}))}async onChooseRef(e){if(null==this.repository)return;let t=await (0,E.n)(this.repository.path,e.title,e.placeholder,{allowedAdditionalInput:e.allowedAdditionalInput,include:e.include??["branches","tags"],picked:e.picked}),r=t?.value;return r?.sha!=null?{id:r.id,name:r.name,sha:r.sha,refType:r.refType,graphRefType:ty(r)}:void 0}async onChooseComparison(e){if(null==this.repository)return{range:void 0};let t=await (0,V.n)(this.container,this.repository.path,{getTitleAndPlaceholder:t=>{switch(t){case 1:return{title:e.title,placeholder:"Choose a branch or tag to show commits from"};case 2:return{title:e.title,placeholder:"Choose a base to compare against (e.g., main)"}}}});return{range:null!=t?`${t.base.ref}..${t.head.ref}`:void 0}}async onChooseAuthor(e){if(null==this.repository)return{authors:void 0};let t=null!=e.picked?new Set(e.picked):void 0,r=await (0,L.W)(this.container,this.repository,e.title,e.placeholder,{appendReposToTitle:!0,clearButton:!0,multiselect:!0,picked:e=>null!=t&&(null!=e.email&&t.has(e.email)||null!=e.name&&t.has(e.name)||null!=e.username&&t.has(e.username))});return{authors:null!=r?(0,Q.x1)(r,e=>e.email):void 0}}async onChooseFile(e){if(null==this.repository)return{files:void 0};let t=await i.window.showOpenDialog({canSelectFiles:"file"===e.type,canSelectFolders:"folder"===e.type,canSelectMany:"file"===e.type,title:e.title,openLabel:e.openLabel,defaultUri:this.repository.folder?.uri});return t?.length?{files:t.map(e=>this.container.git.getRelativePath(e,this.repository.path))}:{files:void 0}}async onJumpToHead(){if(null==this.repository)return;let e=(0,et.I6)(this._graph.branches.values(),e=>e.current);return null==e&&(e=await this.repository.git.branches.getBranch()),e?.sha!=null?{id:e.id,name:e.name,sha:e.sha,refType:e.refType,graphRefType:ty(e)}:void 0}_fireSelectionChangedDebounced=void 0;_lastUserSelectionTime=0;onSelectionChanged(e){this._showActiveSelectionDetailsDebounced?.cancel();let t=e.selection.find(e=>e.active)??e.selection[0];this.setSelectedRows(t?.id,e.selection,{selected:!0,hidden:t?.hidden}),this._lastUserSelectionTime=Date.now(),this._fireSelectionChangedDebounced??=(0,X.s)(this.fireSelectionChanged.bind(this),50),this._fireSelectionChangedDebounced(t?.id,t?.type)}fireSelectionChanged(e,t){if(null==this.repository)return;let r=this.getRevisionReference(this.repository.path,e,t),i=null!=r?[r]:void 0;this._selection=i,null==i||(!(!this._firstSelection&&this.host.is("editor"))||this.host.active)&&(this.container.events.fire("commit:selected",{commit:i[0],interaction:"passive",preserveFocus:!0,preserveVisibility:this._firstSelection?!1===this._showDetailsView:"selection"!==this._showDetailsView,searchContext:this.getSearchContext(e)},{source:this.host.id}),this._firstSelection=!1)}_notifyDidChangeStateDebounced=void 0;getRevisionReference(e,t,r){if(null!=e&&null!=t)switch(r){case"stash-node":return(0,F.kA)(t,e,{refType:"stash",name:t,number:void 0});case"work-dir-changes":return(0,F.kA)(S.SU,e,{refType:"revision"});default:return(0,F.kA)(t,e,{refType:"revision"})}}updateState(e=!1){(this.host.clearPendingIpcNotifications(),e)?this.notifyDidChangeState():(this._notifyDidChangeStateDebounced??=(0,X.s)(this.notifyDidChangeState.bind(this),250),this._notifyDidChangeStateDebounced())}_notifyDidChangeAvatarsDebounced=void 0;updateAvatars(e=!1){e?this.notifyDidChangeAvatars():(null==this._notifyDidChangeAvatarsDebounced&&(this._notifyDidChangeAvatarsDebounced=(0,X.s)(this.notifyDidChangeAvatars.bind(this),100)),this._notifyDidChangeAvatarsDebounced())}async notifyDidChangeAvatars(){if(null==this._graph)return;let e=this._graph;return this.host.notify(e0,{avatars:Object.fromEntries(e.avatars)})}async notifyDidChangeBranchState(e){return this.host.notify(e2,{branchState:e})}_notifyDidChangeRefsMetadataDebounced=void 0;updateRefsMetadata(e=!1){e?this.notifyDidChangeRefsMetadata():(null==this._notifyDidChangeRefsMetadataDebounced&&(this._notifyDidChangeRefsMetadataDebounced=(0,X.s)(this.notifyDidChangeRefsMetadata.bind(this),100)),this._notifyDidChangeRefsMetadataDebounced())}async notifyDidChangeRefsMetadata(){return this.host.notify(e5,{metadata:null!=this._refsMetadata?Object.fromEntries(this._refsMetadata):this._refsMetadata})}async notifyDidChangeColumns(){if(!this.host.ready||!this.host.visible)return this.host.addPendingIpcNotification(e6,this._ipcNotificationMap,this),!1;let e=this.getColumns(),t=this.getColumnSettings(e);return this.host.notify(e6,{columns:t,context:this.getColumnHeaderContext(t),settingsContext:this.getGraphSettingsIconContext(t)})}async notifyDidChangeScrollMarkers(){if(!this.host.ready||!this.host.visible)return this.host.addPendingIpcNotification(e3,this._ipcNotificationMap,this),!1;let e=this.getColumns(),t=this.getColumnSettings(e);return this.host.notify(e3,{context:this.getGraphSettingsIconContext(t)})}async notifyDidChangeRefsVisibility(e){if(!this.host.ready||!this.host.visible)return this.host.addPendingIpcNotification(e4,this._ipcNotificationMap,this),!1;if(null==e){let t=this.getFiltersByRepo(this._graph?.repoPath);if(e={branchesVisibility:this.getBranchesVisibility(t),excludeRefs:this.getExcludedRefs(t,this._graph)??{},excludeTypes:this.getExcludedTypes(t)??{},includeOnlyRefs:void 0},e?.includeOnlyRefs==null){let r=await this.getIncludedRefs(t,this._graph,{timeout:100});e.includeOnlyRefs=r.refs,r.continuation?.then(t=>{null!=t&&this.notifyDidChangeRefsVisibility({...e,includeOnlyRefs:t})})}}return this.host.notify(e4,e)}async notifyDidChangeConfiguration(){return this.host.ready&&this.host.visible?this.host.notify(eJ,{config:this.getComponentConfig()}):(this.host.addPendingIpcNotification(eJ,this._ipcNotificationMap,this),!1)}async notifyDidFetch(){if(!this.host.ready||!this.host.visible)return this.host.addPendingIpcNotification(tr,this._ipcNotificationMap,this),!1;let e=await this.repository.getLastFetched();return this.host.notify(tr,{lastFetched:new Date(e)})}getSearchResultsData(e){if(!e?.results?.size)return;let t={count:0};if(this._graph?.ids!=null)for(let r of e.results.keys())this._graph.ids.has(r)&&t.count++;return{ids:Object.fromEntries(e.results),count:e.results.size,hasMore:e.hasMore,commitsLoaded:t}}async notifyDidChangeRows(e=!1,t){if(null==this._graph)return;let r=this._graph;return this.host.notify(e7,{rows:r.rows,avatars:Object.fromEntries(r.avatars),downstreams:Object.fromEntries(r.downstreams),refsMetadata:null!=this._refsMetadata?Object.fromEntries(this._refsMetadata):this._refsMetadata,rowsStats:r.rowsStats?.size?Object.fromEntries(r.rowsStats):void 0,rowsStatsLoading:r.rowsStatsDeferred?.isLoaded!=null&&!r.rowsStatsDeferred.isLoaded(),search:this._search?.results?.size?{search:this._search.query,results:this.getSearchResultsData(this._search),partial:!1,searchId:this._searchIdCounter.current}:void 0,selectedRows:e?tw(this._selectedRows):void 0,paging:{startingCursor:r.paging?.startingCursor,hasMore:r.paging?.hasMore??!1}},t)}async notifyDidChangeRowsStats(e){if(null!=e.rowsStats)return this.host.notify(e9,{rowsStats:Object.fromEntries(e.rowsStats),rowsStatsLoading:e.rowsStatsDeferred?.isLoaded!=null&&!e.rowsStatsDeferred.isLoaded()})}async notifyDidStartFeaturePreview(e){if(!this.host.ready||!this.host.visible)return this.host.addPendingIpcNotification(ti,this._ipcNotificationMap,this),!1;e??=this.getFeaturePreview();let[t]=await this.getGraphAccess();return this.host.notify(ti,{featurePreview:e,allowed:this.isGraphAccessAllowed(t,e)})}async notifyDidChangeWorkingTree(e){return this.host.ready&&this.host.visible?this.host.notify(te,{stats:await this.getWorkingTreeStatsAndPausedOperations(e)??{added:0,deleted:0,modified:0}}):(this.host.addPendingIpcNotification(te,this._ipcNotificationMap,this),!1)}async notifyDidChangeSelection(){return this.host.ready&&this.host.visible?this.host.notify(e8,{selection:tw(this._selectedRows)??{}}):(this.host.addPendingIpcNotification(e8,this._ipcNotificationMap,this),!1)}async notifyDidChangeSubscription(){if(!this.host.ready||!this.host.visible)return this.host.addPendingIpcNotification(eK,this._ipcNotificationMap,this),!1;let[e]=await this.getGraphAccess();return this.host.notify(eK,{subscription:e.subscription.current,allowed:this.isGraphAccessAllowed(e,this.getFeaturePreview())})}notifyDidChangeOrgSettings(){this.host.notify(eX,{orgSettings:this.getOrgSettings()})}async notifyDidChangeState(){return this.host.ready&&this.host.visible?(this._notifyDidChangeStateDebounced?.cancel(),this.host.notify(eZ,{state:await this.getState()})):(this.host.addPendingIpcNotification(eZ,this._ipcNotificationMap,this),!1)}ensureRepositorySubscriptions(e){if(this.ensureLastFetchedSubscription(e),!e&&null!=this._repositoryEventsDisposable)return;null!=this._repositoryEventsDisposable&&(this._repositoryEventsDisposable.dispose(),this._repositoryEventsDisposable=void 0);let t=this.repository;null!=t&&(this._repositoryEventsDisposable=i.Disposable.from(t.onDidChange(this.onRepositoryChanged,this),t.watchFileSystem(1e3),t.onDidChangeFileSystem(this.onRepositoryFileSystemChanged,this),(0,N.wt)(e=>{"gitlens:repos:withHostingIntegrationsConnected"===e&&(this.resetRefsMetadata(),this.updateRefsMetadata())})))}onIntegrationConnectionChanged(e){this.notifyDidChangeRepoConnection()}async notifyDidChangeRepoConnection(){this.host.notify(eQ,{repositories:await this.getRepositoriesState()})}async getRepositoriesState(){return ed(this.container.git.openRepositories)}async ensureLastFetchedSubscription(e){if(!e&&null!=this._lastFetchedDisposable)return;null!=this._lastFetchedDisposable&&(this._lastFetchedDisposable.dispose(),this._lastFetchedDisposable=void 0);let t=this.repository;if(null==t)return;let r=await t.getLastFetched()??0,i=(0,B.u)(r);0!==r&&i>0&&(this._lastFetchedDisposable=(0,ee.gC)(()=>{if(this.host.visible){if(i!==(0,B.u)(r))return void this.ensureLastFetchedSubscription(!0);this.notifyDidFetch()}},i))}async ensureSearchStartsInRange(e,t){let r;if(t.size){if(null!=this._selectedId&&t.has(this._selectedId)&&e.ids.has(this._selectedId))return this._selectedId;for(let i of t.keys()){if(e.ids.has(i))return i;r=i;break}if(null!=r)return await this.updateGraphWithMoreRows(e,r),this.notifyDidChangeRows(),e.ids.has(r)?r:void 0}}getColumns(){return this.container.storage.getWorkspace("graph:columns")}getExcludedTypes(e){return e?.excludeTypes}getExcludedRefs(e,t){if(null==t)return;let r=e?.excludeRefs;if(!(0,er.xV)(r))return;let i=e=>this.host.asWebviewUri(e),s=U.H.get("graph.avatars",void 0,!0),o={};for(let e in r){let a={...r[e]};if("remote"===a.type&&a.owner){let e=t.remotes.get(a.owner);null!=e&&(a.avatarUrl=((s?e.provider?.avatarUri:void 0)??(0,D.Wf)(this.container,e,i))?.toString(!0))}o[e]=a}return o}async getIncludedRefs(e,t,r){let i,s;if(this.cancelOperation("computeIncludedRefs"),null==t)return{refs:{}};switch(this.getBranchesVisibility(e)){case"smart":{let e,o=(0,et.I6)(t.branches.values(),e=>e.current);if(null==o)return{refs:{},continuation:s};let a=this.createCancellation("computeIncludedRefs"),n=await (0,k.Y7)(this.container,o,{cancellation:a.token,timeout:r?.timeout});if(a.token.isCancellationRequested)return{refs:{},continuation:s};n.mergeTargetBranch?.paused?s=n.mergeTargetBranch.value.then(async e=>{if(!(null==e||a?.token.isCancellationRequested))return Object.fromEntries(await this.getVisibleRefs(t,o,{baseOrTargetBranchName:e,defaultBranchName:n.defaultBranch}))}):e=n.mergeTargetBranch?.value,i=await this.getVisibleRefs(t,o,{baseOrTargetBranchName:e??n.baseBranch,defaultBranchName:n.defaultBranch});break}case"current":{let e=(0,et.I6)(t.branches.values(),e=>e.current);if(null==e)return{refs:{},continuation:s};i=await this.getVisibleRefs(t,e);break}case"favorited":{let e=(0,k.YV)(this.container);if(e.size)for(let r of(i=new Map,t.branches.values()))(r.current||e.has(r.id))&&i.set(r.id,tf(r));if(!i?.size)return{refs:{"gk.empty-set-marker":{}},continuation:s}}}return{refs:null==i?{}:Object.fromEntries(i),continuation:s}}getFiltersByRepo(e){if(null==e)return;let t=this.container.storage.getWorkspace("graph:filtersByRepo");return t?.[e]}getColumnSettings(e){let t={...tu};if(null!=e)for(let[r,i]of Object.entries(e))t[r]={...tu[r],...i};return t}getColumnHeaderContext(e){return(0,ea.C9)({webviewItem:"gitlens:graph:columns",webviewItemValue:this.getColumnContextItems(e).join(",")})}getGraphSettingsIconContext(e){return(0,ea.C9)({webviewItem:"gitlens:graph:settings",webviewItemValue:this.getSettingsIconContextItems(e).join(",")})}getColumnContextItems(e){let t=[],r=["author","changes","datetime","graph","message","ref","sha"],i=0;for(let[s,o]of Object.entries(e))r.includes(s)&&(!o.isHidden&&i++,t.push(`column:${s}:${o.isHidden?"hidden":"visible"}${o.mode?`+${o.mode}`:""}`));return i>1&&t.push("columns:canHide"),t}getSettingsIconContextItems(e){let t=null!=e?this.getColumnContextItems(e):[];if(U.H.get("graph.scrollMarkers.enabled")){let e=U.H.get("graph.scrollMarkers.additionalTypes");for(let r of["localBranches","remoteBranches","stashes","tags","pullRequests"])t.push(`scrollMarker:${r}:${e.includes(r)?"enabled":"disabled"}`)}return t}getBranchesVisibility(e){let t;return this.repository?.virtual?"current":null==e?U.H.get("graph.branchesVisibility"):(null!=e&&null==e.branchesVisibility&&null!=e.includeOnlyRefs&&1===Object.keys(e.includeOnlyRefs).length&&"HEAD"===Object.values(e.includeOnlyRefs)[0].name?(t="current",null!=this.repository&&this.updateFiltersByRepo(this.repository.path,{branchesVisibility:t,includeOnlyRefs:void 0})):t=e?.branchesVisibility??U.H.get("graph.branchesVisibility"),t)}getComponentConfig(){return{aiEnabled:this.container.ai.enabled,avatars:U.H.get("graph.avatars"),dateFormat:U.H.get("graph.dateFormat")??U.H.get("defaultDateFormat")??"short+short",dateStyle:U.H.get("graph.dateStyle")??U.H.get("defaultDateStyle"),enabledRefMetadataTypes:this.getEnabledRefMetadataTypes(),dimMergeCommits:U.H.get("graph.dimMergeCommits"),highlightRowsOnRefHover:U.H.get("graph.highlightRowsOnRefHover"),idLength:U.H.get("advanced.abbreviatedShaLength"),minimap:U.H.get("graph.minimap.enabled"),minimapDataType:U.H.get("graph.minimap.dataType"),minimapMarkerTypes:this.getMinimapMarkerTypes(),multiSelectionMode:U.H.get("graph.multiselect"),onlyFollowFirstParent:U.H.get("graph.onlyFollowFirstParent"),scrollRowPadding:U.H.get("graph.scrollRowPadding"),scrollMarkerTypes:this.getScrollMarkerTypes(),showGhostRefsOnRowHover:U.H.get("graph.showGhostRefsOnRowHover"),showRemoteNamesOnRefs:U.H.get("graph.showRemoteNames"),sidebar:U.H.get("graph.sidebar.enabled")??!0,stickyTimeline:U.H.get("graph.stickyTimeline")}}getScrollMarkerTypes(){return U.H.get("graph.scrollMarkers.enabled")?["selection","highlights","head","upstream",...U.H.get("graph.scrollMarkers.additionalTypes")]:[]}getMinimapMarkerTypes(){return U.H.get("graph.minimap.enabled")?["selection","highlights","head","upstream",...U.H.get("graph.minimap.additionalTypes")]:[]}getEnabledRefMetadataTypes(){let e=[];return U.H.get("graph.issues.enabled")&&e.push("issue"),U.H.get("graph.pullRequests.enabled")&&e.push("pullRequest"),U.H.get("graph.showUpstreamStatus")&&e.push("upstream"),e}async getGraphAccess(){let e=await this.container.git.access("graph",this.repository?.path);this._etagSubscription=this.container.subscription.etag;let t=e?.visibility;return null==t&&null!=this.repository&&(t=await this.container.git.visibility(this.repository?.path)),[e,t]}isGraphAccessAllowed(e,t){return(e?.allowed??!1)!==!1||"active"===(0,h.Zd)(t)}getGraphItemContext(e){let t="string"==typeof e?JSON.parse(e):e;return null==t||"webview"in t||(t.webview=this.host.id),t}async getWorkingTreeStatsAndPausedOperations(e,t){if(null==this.repository||!this.container.git.repositoryCount)return;let r=this.container.git.getRepositoryService(this.repository.path);e??=await r.status.hasWorkingChanges({staged:!0,unstaged:!0,untracked:!0},t);let[i,s]=await Promise.allSettled([e?r.status.getStatus(t):void 0,r.pausedOps?.getPausedOperationStatus?.(t)]),o=(0,ei.Ro)(i),a=o?.getDiffStatus(),n=(0,ei.Ro)(s);return{added:a?.added??0,deleted:a?.deleted??0,modified:a?.changed??0,hasConflicts:o?.hasConflicts,pausedOpStatus:n,context:(0,ea.C9)({webviewItem:"gitlens:wip",webviewItemValue:{type:"commit",ref:this.getRevisionReference(this.repository.path,S.SU,"work-dir-changes")}})}}async getState(e){let t,r;this.cancelOperation("branchState"),this.cancelOperation("state");let i=this._searchRequest;if(this._searchRequest=void 0,0===this.container.git.repositoryCount||null==this.repository&&(this.repository=this.container.git.getBestRepositoryOrFirst(),null==this.repository))return{...this.host.baseWebviewState,allowed:!0,repositories:[]};let s=this.createCancellation("state");this._etagRepository=this.repository?.etag,this.host.title=`${this.host.originalTitle}: ${this.repository.name}`;let{defaultItemLimit:o}=U.H.get("graph"),a=Math.max(o,this._graph?.ids.size??o),h=await this.repository.git.status.hasWorkingChanges({staged:!0,unstaged:!0,untracked:!0},s.token),l=this._selectedId,p=!1;!this._honorSelectedId&&null==i&&l!==S.SU&&h&&"wip"===U.H.get("graph.initialRowSelection")&&(p=!0,this.setSelectedRows(S.SU),l=this._selectedId),this._honorSelectedId=!1;let c=this.getColumns(),u=this.getColumnSettings(c),d=this.repository.git.graph.getGraph(l,e=>this.host.asWebviewUri(e),{include:{stats:U.H.get("graph.minimap.enabled")&&"lines"===U.H.get("graph.minimap.dataType")||!u.changes.isHidden},limit:a},s.token),g=Promise.allSettled([this.getGraphAccess(),this.getWorkingTreeStatsAndPausedOperations(h,s.token),this.repository.git.branches.getBranch(void 0,s.token),this.repository.getLastFetched()]);e?queueMicrotask(async()=>{try{let e=await d;this.setGraph(e),Date.now()-this._lastUserSelectionTime<500||this._selectedId===e.id||(p=!0,this.setSelectedRows(e.id)),this.notifyDidChangeRefsVisibility(),this.notifyDidChangeRows(p)}catch{}}):(t=await d,this.setGraph(t),l!==t.id&&this.setSelectedRows(t.id));let[m,f,v,y]=await g;if(s.token.isCancellationRequested)throw new n.AL;let[w,b]=(0,ei.Ro)(m)??[],R=(0,ei.Ro)(v);if(null!=R){r={...R.upstream?.state??{ahead:0,behind:0}};let e=t?.worktreesByBranch??await (0,O.Ao)(this.repository,void 0,s.token);if(r.worktree=e?.has(R.id)??!1,null!=R.upstream){r.upstream=R.upstream.name;let e=this.createCancellation("branchState"),[t,i]=await Promise.allSettled([R.getRemote(),(0,ei.wW)(R.getAssociatedPullRequest(),e.token,100)]),s=(0,ei.Ro)(t);s?.provider!=null&&(r.provider={name:s.provider.name,icon:"remote"===s.provider.icon?"cloud":s.provider.icon,url:await s.provider.url({type:C.J.Repo})});let o=(0,ei.Ro)(i);if(o?.paused){let t={...r};o.value.then(r=>{e?.token.isCancellationRequested||null!=r&&(t.pr=(0,H.pf)(r),this.notifyDidChangeBranchState(t))})}else{let e=o?.value;null!=e&&(r.pr=(0,H.pf)(e))}}}let P=this.getFiltersByRepo(this.repository.path),G={branchesVisibility:this.getBranchesVisibility(P),excludeRefs:this.getExcludedRefs(P,t)??{},excludeTypes:this.getExcludedTypes(P)??{},includeOnlyRefs:void 0};if(null!=t){let e=await this.getIncludedRefs(P,t,{timeout:100});G.includeOnlyRefs=e.refs,e.continuation?.then(e=>{null!=e&&this.notifyDidChangeRefsVisibility({...G,includeOnlyRefs:e})})}let W=this.container.storage.get("graph:searchMode","normal"),_=this.container.storage.get("graph:useNaturalLanguageSearch",!0),k=this.getFeaturePreview();return{...this.host.baseWebviewState,webroot:this.host.getWebRoot(),windowFocused:this.isWindowFocused,repositories:await ed(this.container.git.openRepositories),selectedRepository:this.repository.path,selectedRepositoryVisibility:b,branchesVisibility:G.branchesVisibility,branch:R&&{name:R.name,ref:R.ref,refType:R.refType,remote:R.remote,repoPath:R.repoPath,sha:R.sha,id:R.id,upstream:R.upstream},branchState:r,lastFetched:new Date((0,ei.Ro)(y)),selectedRows:tw(this._selectedRows),subscription:w?.subscription.current,allowed:this.isGraphAccessAllowed(w,k),avatars:null!=t?Object.fromEntries(t.avatars):void 0,refsMetadata:null===this.resetRefsMetadata()?null:{},loading:!0===e,rowsStatsLoading:t?.rowsStatsDeferred?.isLoaded!=null&&!t.rowsStatsDeferred.isLoaded(),rows:t?.rows,downstreams:null!=t?Object.fromEntries(t.downstreams):void 0,paging:null!=t?{startingCursor:t.paging?.startingCursor,hasMore:t.paging?.hasMore??!1}:void 0,columns:u,config:this.getComponentConfig(),context:{header:this.getColumnHeaderContext(u),settings:this.getGraphSettingsIconContext(u)},excludeRefs:G.excludeRefs,excludeTypes:G.excludeTypes,includeOnlyRefs:G.includeOnlyRefs,nonce:this.host.cspNonce,workingTreeStats:(0,ei.Ro)(f)??{added:0,deleted:0,modified:0},searchMode:W,useNaturalLanguageSearch:_,featurePreview:k,orgSettings:this.getOrgSettings(),mcpBannerCollapsed:this.getMcpBannerCollapsed(),searchRequest:i}}updateColumns(e){let t=this.container.storage.getWorkspace("graph:columns");for(let[r,i]of Object.entries(e))t=(0,er.Y8)(t,r,i);this.container.storage.storeWorkspace("graph:columns",t).catch(),this.notifyDidChangeColumns()}resetColumnsDefault(){this.updateColumns(tu)}resetColumnsCompact(){this.updateColumns(td)}updateExcludedRefs(e,t,r){if(null==e||!t?.length)return;let i=this.getFiltersByRepo(e)?.excludeRefs??{};for(let e of t)i=(0,er.Y8)(i,e.id,r?void 0:{id:e.id,type:e.type,name:e.name,owner:e.owner});this.updateFiltersByRepo(e,{excludeRefs:i}),this.notifyDidChangeRefsVisibility()}updateFiltersByRepo(e,t){if(null==e)return;let r=this.container.storage.getWorkspace("graph:filtersByRepo");return this.container.storage.storeWorkspace("graph:filtersByRepo",(0,er.Y8)(r,e,{...r?.[e],...t}))}async getVisibleRefs(e,t,r){let i=new Map([[t.id,tf(t)]]),s=tv(t);null==s||i.has(s.id)||i.set(s.id,s);let o=!0,a=r?.baseOrTargetBranchName;if(null!=a&&a!==t?.name){let t=e.branches.get(a);if(null!=t)if(o=!1,t.remote)i.has(t.id)||i.set(t.id,tf(t,!0));else{let e=tv(t);null==e||i.has(e.id)||i.set(e.id,e)}}let n=r?.associatedPullRequest;if(n?.refs!=null){let t,r=(0,et.I6)(e.remotes.values(),e=>e.matches(n.refs.base.url));null!=r&&(t=e.branches.get(`${r.name}/${n.refs.base.branch}`)),null!=t&&(o=!1,i.has(t.id)||i.set(t.id,tf(t,!0)))}if(o){let s=r?.defaultBranchName;if(null!=s&&s!==t?.name){let t=e.branches.get(s);if(null!=t)if(t.remote){i.has(t.id)||i.set(t.id,tf(t,!0));let r=await (0,M.kY)(s,e.branches);null==r||i.has(r.id)||i.set(r.id,tf(r,!1))}else{i.has(t.id)||i.set(t.id,tf(t,!1));let e=tv(t);null==e||i.has(e.id)||i.set(e.id,e)}}}return i}onUpdateIncludeOnlyRefs(e){this.updateIncludeOnlyRefs(this._graph?.repoPath,e)}updateIncludeOnlyRefs(e,{branchesVisibility:t,refs:r}){let i;if(null!=e){if(r?.length)for(let e of(i={},r))i[e.id]={id:e.id,type:e.type,name:e.name,owner:e.owner};else i=void 0;if(null!=t){let r=this.getBranchesVisibility(this.getFiltersByRepo(e));this.host.sendTelemetryEvent("graph/branchesVisibility/changed",{"branchesVisibility.old":r,"branchesVisibility.new":t})}this.updateFiltersByRepo(e,{branchesVisibility:t,includeOnlyRefs:i}),this.notifyDidChangeRefsVisibility()}}onUpdateExcludedTypes(e){this.updateExcludedTypes(this._graph?.repoPath,e)}updateExcludedTypes(e,{key:t,value:r}){if(null==e)return;let i=this.getFiltersByRepo(e)?.excludeTypes;((0,er.xV)(i)||!1!==r)&&(i=(0,er.Y8)(i,t,r),this.host.sendTelemetryEvent("graph/filters/changed",{key:t,value:r}),this.updateFiltersByRepo(e,{excludeTypes:i}),this.notifyDidChangeRefsVisibility())}resetHoverCache(){this._hoverCache.clear(),this.cancelOperation("hover")}resetRefsMetadata(){return this._refsMetadata=(0,N.SD)("gitlens:repos:withHostingIntegrationsConnected")?void 0:null,this._refsMetadata}resetRepositoryState(){this._getBranchesAndTagsTips=void 0,this._searchHistory=void 0,this.setGraph(void 0),this.setSelectedRows(void 0)}resetSearchState(){this._search=void 0,this.cancelOperation("search")}setSelectedRows(e,t,r){let i=e;"work-dir-changes"===e&&(i=S.SU),this._selectedId!==i&&(this._selectedId=i,e===S.SU&&(e="work-dir-changes"),null!=t?(this._selectedRows=Object.fromEntries(t.map(e=>[e.id,{selected:!0,hidden:e.hidden}])),null==e||t.some(t=>t.id===e)||(this._selectedRows[e]=r??{selected:!0})):this._selectedRows=null!=e?{[e]:r??{selected:!0}}:void 0)}setGraph(e){this._graph=e,null==e?(this.resetHoverCache(),this.resetRefsMetadata(),this.resetSearchState(),this.cancelOperation("computeIncludedRefs")):e.rowsStatsDeferred?.promise.then(()=>void this.notifyDidChangeRowsStats(e))}_pendingRowsQuery;async updateGraphWithMoreRows(e,t,r){if(null!=this._pendingRowsQuery){let{id:e,search:i}=this._pendingRowsQuery;if(i===r&&(e===t||null!=e&&null==t))return this._pendingRowsQuery.promise;this._pendingRowsQuery.cancellable.cancel(),this._pendingRowsQuery.cancellable.dispose(),this._pendingRowsQuery=void 0}let s=new es.e(void 0),o=new i.CancellationTokenSource,a=o.token;return this._pendingRowsQuery={promise:this.updateGraphWithMoreRowsCore(e,t,r,a).catch(e=>{if(!a.isCancellationRequested)throw e}),cancellable:o,id:t,search:r},this._pendingRowsQuery.promise.finally(()=>{a.isCancellationRequested||(this.host.sendTelemetryEvent("graph/rows/loaded",{duration:s.elapsed(),rows:e.rows.length??0}),s.stop(),this._pendingRowsQuery=void 0)}),this._pendingRowsQuery.promise}async updateGraphWithMoreRowsCore(e,t,r,i){let{defaultItemLimit:s,pageItemLimit:o}=U.H.get("graph"),a=o??s,h=t,l=r?.results.size?(0,et.HV)(r.results.keys()):void 0;!t&&r?.results.size&&(r.results.size<50&&r.query.filter?(h=l,a=0):h=r?.results.size?(0,et.I6)(r.results.keys(),t=>!e.ids.has(t)):void 0);let p=await e.more?.(a,h,i);if(null!=p){if(this.setGraph(p),!r?.hasMore||null==l)return;if(p.ids.has(l))try{await this.searchGraphOrContinue({search:r.query,more:!0},!1)}catch(e){if(e instanceof n.AL)return;this.host.notify(tt,{search:r.query,results:{error:e instanceof y.Do?"Invalid search pattern":"Unexpected error"},partial:!1,searchId:this._searchIdCounter.current})}}}fetch(e){let t=null!=e?this.getGraphItemRef(e,"branch"):void 0;d.hd(this.repository,t)}forcePush(e){this.push(e,!0)}pull(e){let t=null!=e?this.getGraphItemRef(e,"branch"):void 0;d.a$(this.repository,t)}push(e,t){let r=null!=e?this.getGraphItemRef(e):void 0;d.VC(this.repository,t,r)}createBranch(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():l.vt(t.repoPath,t)}deleteBranch(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;return l.TF(t.repoPath,t)}return Promise.resolve()}async star(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue,r=await this.container.git.getRepositoryService(t.repoPath).branches.getBranch(t.name);if(null!=r)return r.star()}return Promise.resolve()}async unstar(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue,r=await this.container.git.getRepositoryService(t.repoPath).branches.getBranch(t.name);if(null!=r)return r.unstar()}return Promise.resolve()}mergeBranchInto(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;return d.h1(t.repoPath,t)}return Promise.resolve()}openBranchOnRemote(e,t){if(ef(e,"branch")){let r,{ref:i}=e.webviewItemValue;return i.remote?r=(0,M.Zq)(i.name):null!=i.upstream&&(r=(0,M.Zq)(i.upstream.name)),(0,$.RS)("gitlens.openOnRemote",{repoPath:i.repoPath,resource:{type:C.J.Branch,branch:i.name},remote:r,clipboard:t})}return Promise.resolve()}copyRemoteBranchUrl(e){return this.openBranchOnRemote(e,!0)}publishBranch(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;return d.VC(t.repoPath,void 0,t)}return Promise.resolve()}rebase(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():d.RU(t.repoPath,t)}rebaseToRemote(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;if(null!=t.upstream)return d.RU(t.repoPath,(0,F.kA)(t.upstream.name,t.repoPath,{refType:"branch",name:t.upstream.name,remote:!0}))}return Promise.resolve()}renameBranch(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;return l.$w(t.repoPath,t)}return Promise.resolve()}associateIssueWithBranch(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;return(0,$.RS)("gitlens.associateIssueWithBranch",{command:"associateIssueWithBranch",branch:t,source:"graph"})}return Promise.resolve()}cherryPick(e){let{selection:t}=this.getGraphItemRefs(e,"revision");return null==t?Promise.resolve():d.$T(t[0].repoPath,t)}async copy(e){let t,{selection:r}=this.getGraphItemRefs(e);if(r.length)t=r.map(e=>"revision"===e.refType&&e.message?`${e.name}: ${e.message.trim()}`:e.name).join(`
`);else if(em(e,"contributor")){let{name:r,email:i}=e.webviewItemValue;t=`${r}${i?` <${i}>`:""}`}else if(em(e,"pullrequest")){let{url:r}=e.webviewItemValue;t=r}null!=t&&await i.env.clipboard.writeText(t)}copyMessage(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():(0,$.RS)("gitlens.copyMessageToClipboard",{repoPath:t.repoPath,sha:t.ref,message:"message"in t?t.message:void 0})}async copySha(e){let t=this.getGraphItemRef(e);if(null==t)return Promise.resolve();let r=t.ref;return(0,x.HH)(r)||(r=(await this.container.git.getRepositoryService(t.repoPath).revision.resolveRevision(r)).sha),(0,$.RS)("gitlens.copyShaToClipboard",{sha:r})}openInDetailsView(e){let t=this.getGraphItemRef(e,"revision");return null==t?Promise.resolve():this.host.is("view")?void(0,p.nz)(t,{preserveFocus:!0,preserveVisibility:!1}):(0,$.RS)("gitlens.showInDetailsView",{ref:t})}async commitViaSCM(e){let t=this.getGraphItemRef(e,"revision");if(await (0,$.S4)("workbench.view.scm"),null!=t){let e=await this.container.git.getRepositoryService(t.repoPath).getScmRepository();if(null==e)return;e.inputBox.value=e.inputBox.value}}openCommitOnRemote(e,t){let{selection:r}=this.getGraphItemRefs(e,"revision");return null==r?Promise.resolve():(0,$.RS)("gitlens.openOnRemote",{repoPath:r[0].repoPath,resource:r.map(e=>({type:C.J.Commit,sha:e.ref})),clipboard:t})}copyRemoteCommitUrl(e){return this.openCommitOnRemote(e,!0)}async compareSelectedCommits(e){let{selection:t}=this.getGraphItemRefs(e,"revision");if(t?.length!==2)return Promise.resolve();let[r,i]=t,[s,o]=await (0,p.Di)(this.container,r.repoPath,r.ref,i.ref);return this.container.views.searchAndCompare.compare(r.repoPath,s,o)}async abortPausedOperation(e){null!=this.repository&&await (0,u._e)(this.repository.git)}async continuePausedOperation(e){if(null==this.repository)return;let t=await this.repository.git.pausedOps?.getPausedOperationStatus?.();null!=t&&"revert"!==t.type&&await (0,u.Ts)(this.repository.git)}async openRebaseEditor(e){if(null==this.repository)return;let t=await this.repository.git.pausedOps?.getPausedOperationStatus?.();if(t?.type!=="rebase")return;let r=await this.repository.git.config.getGitDir?.();if(null==r)return;let s=i.Uri.joinPath(r.uri,"rebase-merge","git-rebase-todo");(0,$.S4)("vscode.openWith",s,"gitlens.rebase",{preview:!1})}async skipPausedOperation(e){null!=this.repository&&await (0,u.RG)(this.repository.git)}async showConflicts(e){await (0,u.jn)(this.container,e.repoPath,{openRebaseEditor:!0})}copyDeepLinkToBranch(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;return(0,$.RS)("gitlens.copyDeepLinkToBranch",{refOrRepoPath:t})}return Promise.resolve()}copyDeepLinkToCommit(e){let t=this.getGraphItemRef(e,"revision");return null==t?Promise.resolve():(0,$.RS)("gitlens.copyDeepLinkToCommit",{refOrRepoPath:t})}copyDeepLinkToRepo(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;return t.remote?(0,$.RS)("gitlens.copyDeepLinkToRepo",{refOrRepoPath:t.repoPath,remote:(0,M.Zq)(t.name)}):Promise.resolve()}return Promise.resolve()}copyDeepLinkToTag(e){if(ef(e,"tag")){let{ref:t}=e.webviewItemValue;return(0,$.RS)("gitlens.copyDeepLinkToTag",{refOrRepoPath:t})}return Promise.resolve()}async shareAsCloudPatch(e){let t=this.getGraphItemRef(e,"revision")??this.getGraphItemRef(e,"stash");if(null==t)return Promise.resolve();let{summary:r,body:i}=(0,T.TH)(t.message);return(0,$.RS)("gitlens.createCloudPatch",{to:t.ref,repoPath:t.repoPath,title:r,description:i})}async copyPatchToClipboard(e){let t=this.getGraphItemRef(e,"revision")??this.getGraphItemRef(e,"stash");if(null==t)return Promise.resolve();let{summary:r,body:i}=(0,T.TH)(t.message);return(0,$.RS)("gitlens.copyPatchToClipboard",{from:`${t.ref}^`,to:t.ref,repoPath:t.repoPath,title:r,description:i})}resetCommit(e){let t=this.getGraphItemRef(e,"revision");return null==t?Promise.resolve():d.cL(t.repoPath,(0,F.kA)(`${t.ref}^`,t.repoPath,{refType:"revision",name:`${t.name}^`,message:t.message}))}resetToCommit(e){let t=this.getGraphItemRef(e,"revision");return null==t?Promise.resolve():d.cL(t.repoPath,t)}resetToTip(e){let t=this.getGraphItemRef(e,"branch");return null==t?Promise.resolve():d.cL(t.repoPath,(0,F.kA)(t.ref,t.repoPath,{refType:"revision",name:t.name}))}revertCommit(e){let t=this.getGraphItemRef(e,"revision");return null==t?Promise.resolve():d.ru(t.repoPath,t)}switchTo(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():d.S_(t.repoPath,t)}resetToTag(e){let t=this.getGraphItemRef(e,"tag");return null==t?Promise.resolve():d.cL(t.repoPath,t)}hideRef(e,t){let r;if(t?.group&&function(e){return null!=e&&null!=e&&(0,ea.PH)(e)&&("gitlens.graph"===e.webview||"gitlens.views.graph"===e.webview)&&"object"==typeof e.webviewItemGroupValue&&"refGroup"===e.webviewItemGroupValue.type}(e))({refs:r}=e.webviewItemGroupValue);else if(!t?.group&&ef(e)){let{ref:t}=e.webviewItemValue;null!=t.id&&(r=[t])}return null!=r&&this.updateExcludedRefs(this._graph?.repoPath,r.map(e=>{let r="branch"===e.refType&&e.remote;return{id:e.id,name:r?t?.remote?"*":(0,M.km)(e.name):e.name,owner:r?(0,M.Zq)(e.name):void 0,type:"branch"===e.refType?e.remote?"remote":"head":"tag"}}),!1),Promise.resolve()}hideRemote(e){return this.hideRef(e,{remote:!0})}hideRefGroup(e){return this.hideRef(e,{group:!0})}soloReference(e){if(!ef(e))return;let{ref:t}=e.webviewItemValue;if(null==t.id)return;let r=this.container.git.getRepository(t.repoPath);if(null==r)return Promise.resolve();(0,$.RS)("gitlens.showInCommitGraph",{repository:r,search:{query:`ref:${t.name}`,filter:!0,matchAll:!1,matchCase:!1,matchRegex:!1},source:{source:"graph"}})}switchToAnother(e){let t=this.getGraphItemRef(e);return null==t?d.S_(this.repository?.path):d.S_(t.repoPath)}async undoCommit(e){let t=this.getGraphItemRef(e,"revision");if(null==t)return Promise.resolve();await (0,p.MQ)(this.container,t)}saveStash(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():g.VC(t.repoPath)}applyStash(e){let t=this.getGraphItemRef(e,"stash");return null==t?Promise.resolve():g.Bb(t.repoPath,t)}deleteStash(e){let t=this.getGraphItemRef(e,"stash");return null==t?Promise.resolve():g.gv(t.repoPath,[t])}renameStash(e){let t=this.getGraphItemRef(e,"stash");return null==t?Promise.resolve():g.$w(t.repoPath,t)}async createTag(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():m.vt(t.repoPath,t)}deleteTag(e){if(ef(e,"tag")){let{ref:t}=e.webviewItemValue;return m.TF(t.repoPath,t)}return Promise.resolve()}async createWorktree(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():f.vt(t.repoPath,void 0,t)}async createPullRequest(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue,r=this.container.git.getRepository(t.repoPath),i=await r?.git.branches.getBranch(t.name),s=await i?.getRemote();return(0,$.ph)("createPullRequest",{repoPath:t.repoPath,remote:null!=s?{name:s.name,provider:null!=s.provider?{id:s.provider.id,name:s.provider.name,domain:s.provider.domain}:void 0,url:s.url}:void 0,branch:{name:t.name,upstream:t.upstream?.name,isRemote:t.remote}})}return Promise.resolve()}openPullRequest(e){if(em(e,"pullrequest")){let t=e.webviewItemValue;return(0,$.ph)("openPullRequest",{repoPath:t.repoPath,provider:{id:t.provider.id,name:t.provider.name,domain:t.provider.domain},pullRequest:{id:t.id,url:t.url},source:{source:"graph"}})}return Promise.resolve()}openPullRequestChanges(e){if(em(e,"pullrequest")){let t=e.webviewItemValue;if(t.refs?.base!=null&&null!=t.refs.head){let e=(0,H.tI)(t.repoPath,t.refs);return(0,p.$5)(this.container,{repoPath:e.repoPath,lhs:e.base.ref,rhs:e.head.ref},{title:`Changes in Pull Request #${t.id}`})}}return Promise.resolve()}openPullRequestComparison(e){if(em(e,"pullrequest")){let t=e.webviewItemValue;if(t.refs?.base!=null&&null!=t.refs.head){let e=(0,H.tI)(t.repoPath,t.refs);return this.container.views.searchAndCompare.compare(e.repoPath,e.head,e.base)}}return Promise.resolve()}openPullRequestOnRemote(e,t){if(em(e,"pullrequest")){let{url:r}=e.webviewItemValue;return(0,$.RS)("gitlens.openPullRequestOnRemote",{pr:{url:r},clipboard:t})}return Promise.resolve()}openIssueOnRemote(e){if(em(e,"issue")){let{url:t}=e.webviewItemValue;(0,$.RS)("gitlens.openIssueOnRemote",{issue:{url:t}})}return Promise.resolve()}async compareAncestryWithWorking(e){let t=this.getGraphItemRef(e);if(null==t)return Promise.resolve();let r=await this.container.git.getRepositoryService(t.repoPath).branches.getBranch();if(null==r)return;let i=await this.container.git.getRepositoryService(t.repoPath).refs.getMergeBase(r.ref,t.ref);if(null!=i)return this.container.views.searchAndCompare.compare(t.repoPath,"",{ref:i,label:`${r.ref} (${(0,x.pV)(i)})`})}async compareHeadWith(e){let t=this.getGraphItemRef(e);if(null==t)return Promise.resolve();let[r,i]=await (0,p.Di)(this.container,t.repoPath,"HEAD",t.ref);return this.container.views.searchAndCompare.compare(t.repoPath,r,i)}compareBranchWithHead(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():this.container.views.searchAndCompare.compare(t.repoPath,t.ref,"HEAD")}async compareWithMergeBase(e){let t=this.getGraphItemRef(e);if(null==t)return Promise.resolve();let r=await this.container.git.getRepositoryService(t.repoPath).branches.getBranch();if(null==r)return;let i=await this.container.git.getRepositoryService(t.repoPath).refs.getMergeBase(r.ref,t.ref);if(null!=i)return this.container.views.searchAndCompare.compare(t.repoPath,t.ref,{ref:i,label:`${r.ref} (${(0,x.pV)(i)})`})}async openChangedFileDiffsWithMergeBase(e){let t=this.getGraphItemRef(e);if(null==t)return Promise.resolve();let r=await this.container.git.getRepositoryService(t.repoPath).branches.getBranch();if(null==r)return;let i=await this.container.git.getRepositoryService(t.repoPath).refs.getMergeBase(r.ref,t.ref);if(null!=i)return(0,p.$5)(this.container,{repoPath:t.repoPath,lhs:i,rhs:t.ref},{title:`Changes between ${r.ref} (${(0,x.pV)(i)}) ${a.EO.ArrowLeftRightLong} ${(0,x.pV)(t.ref,{strings:{working:"Working Tree"}})}`})}compareWithUpstream(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;if(null!=t.upstream)return this.container.views.searchAndCompare.compare(t.repoPath,t.ref,t.upstream.name)}return Promise.resolve()}changeUpstreamBranch(e){if(!ef(e,"branch"))return Promise.resolve();let{ref:t}=e.webviewItemValue;return l.iW(t.repoPath,t)}compareWorkingWith(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():this.container.views.searchAndCompare.compare(t.repoPath,"",t.ref)}selectForCompare(e){let t=this.getGraphItemRef(e);null!=t&&(0,N.o)("gitlens:views:canCompare",{label:t.name,ref:t.ref,repoPath:t.repoPath})}compareWithSelected(e){let t=this.getGraphItemRef(e);if(null==t)return;let r=(0,N.SD)("gitlens:views:canCompare");if(null!=r){if((0,N.o)("gitlens:views:canCompare",void 0),r.repoPath!==t.repoPath)return void this.selectForCompare(e);this.container.views.searchAndCompare.compare(t.repoPath,r,{label:t.name,ref:t.ref})}}copyWorkingChangesToWorktree(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():f.PB("working-tree",t.repoPath)}generateCommitMessage(e){let t=this.getGraphItemRef(e);return null==t?Promise.resolve():(0,$.RS)("gitlens.ai.generateCommitMessage",{repoPath:t.repoPath,source:"graph"})}aiExplainUnpushed(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue;return t.upstream?(0,$.RS)("gitlens.ai.explainBranch",{repoPath:t.repoPath,ref:t.ref,baseBranch:t.upstream.name,source:{source:"graph",context:{type:"branch"}}}):Promise.resolve()}return Promise.resolve()}explainBranch(e){let t=this.getGraphItemRef(e,"branch");return null==t?Promise.resolve():(0,$.RS)("gitlens.ai.explainBranch",{repoPath:t.repoPath,ref:t.ref,source:{source:"graph",context:{type:"branch"}}})}async recomposeBranch(e){let t=this.getGraphItemRef(e,"branch");if(null!=t)return void await (0,$.RS)("gitlens.recomposeBranch",{repoPath:t.repoPath,branchName:t.name,source:"graph"});let{selection:r}=this.getGraphItemRefs(e,"revision");if(null==r||r.length<2)return;let s=r[0].repoPath,o=r.map(e=>e.sha),a=this._graph;if(null==a)return;o.sort((e,t)=>{let r=a.rows.find(t=>t.sha===e),i=a.rows.find(e=>e.sha===t);return(r?.date??0)-(i?.date??0)});let n=new Map;for(let e of o){let t=a.rows.find(t=>t.sha===e);if(t?.reachableFromBranches)for(let e of t.reachableFromBranches)n.set(e,(n.get(e)??0)+1)}let h=[];for(let[e,t]of n)t===o.length&&h.push(e);if(1!==h.length)return void i.window.showErrorMessage(0===h.length?"The selected commits are not reachable from any single branch.":"The selected commits are reachable from multiple branches. Please select commits unique to a single branch.");let l=h[0];await (0,$.RS)("gitlens.recomposeSelectedCommits",{repoPath:s,branchName:l,commitShas:o,source:"graph"})}async recomposeFromCommit(e){let t=this.getGraphItemRef(e,"revision");if(null==t)return;let r=this._graph;if(null==r)return;let s=r.rows.find(e=>e.sha===t.ref);if(s?.reachableFromBranches?.length!==1)return void i.window.showErrorMessage("Unable to recompose: commit must belong to exactly one local branch");let o=s.reachableFromBranches[0],a=r.branches.get(o);if(null==a)return void i.window.showErrorMessage(`Branch '${o}' not found`);if(null==a.sha)return void i.window.showErrorMessage(`Unable to determine head commit for branch '${o}'`);let n=await this.container.git.getRepositoryService(t.repoPath).commits.getCommit(t.ref);null==n?i.window.showErrorMessage(`Commit '${t.ref}' not found`):null==(n.parents.length>0?n.parents[0]:void 0)?i.window.showErrorMessage("Unable to determine parent commit"):await (0,$.RS)("gitlens.recomposeFromCommit",{repoPath:t.repoPath,commitSha:t.ref,branchName:o,source:"graph"})}recomposeBranchCommand(e){return this.recomposeBranch(e)}composeCommitsCommand(e){return this.composeCommits(e)}recomposeSelectedCommitsCommand(e){return this.recomposeBranch(e)}recomposeFromCommitCommand(e){return this.recomposeFromCommit(e)}explainCommit(e){let t=this.getGraphItemRef(e,"revision");return null==t?Promise.resolve():(0,$.RS)("gitlens.ai.explainCommit",{repoPath:t.repoPath,rev:t.ref,source:{source:"graph",context:{type:"commit"}}})}explainStash(e){let t=this.getGraphItemRef(e,"stash");return null==t?Promise.resolve():(0,$.RS)("gitlens.ai.explainStash",{repoPath:t.repoPath,rev:t.ref,source:{source:"graph",context:{type:"stash"}}})}explainWip(e){let t=this.getGraphItemRef(e,"revision");return null==t?Promise.resolve():(0,$.RS)("gitlens.ai.explainWip",{repoPath:t.repoPath,source:{source:"graph",context:{type:"wip"}}})}async openFiles(e){let t=await this.getCommitFromGraphItemRef(e);if(null!=t)return(0,p.Km)(t)}async openAllChanges(e,t){let r=await this.getCommitFromGraphItemRef(e);if(null!=r)return(0,p.P3)(this.container,r,t)}openChangedFileDiffs(e){return this.openAllChanges(e)}openChangedFileDiffsIndividually(e){return this.openAllChanges(e,!0)}async openAllChangesWithWorking(e,t){let r=await this.getCommitFromGraphItemRef(e);if(null!=r)return(0,p.Qv)(this.container,r,t)}openChangedFileDiffsWithWorking(e){return this.openAllChangesWithWorking(e)}openChangedFileDiffsWithWorkingIndividually(e){return this.openAllChangesWithWorking(e,!0)}async openRevisions(e){let t=await this.getCommitFromGraphItemRef(e);if(null!=t)return(0,p.m)(t)}async openOnlyChangedFiles(e){let t=await this.getCommitFromGraphItemRef(e);if(null!=t)return(0,p.E9)(this.container,t)}async openInWorktree(e){if(ef(e,"branch")){let{ref:t}=e.webviewItemValue,r=this.container.git.getRepository(t.repoPath),i=await r?.git.branches.getBranch(t.name),s=await i?.getAssociatedPullRequest();if(null!=i&&null!=r&&null!=s){let e=(await i.getRemote())?.url??(0,H.Yv)(s).remote.url;if(null!=e){let t=(0,A.pX)(this.container,s,i.getNameWithoutRemote(),e,en.zB.SwitchToPullRequestWorktree);return this.container.deepLinks.processDeepLinkUri(t,!1,r)}}await (0,v.b)({command:"switch",state:{repos:t.repoPath,reference:t,worktreeDefaultOpen:"new"}})}}async openWorktree(e,t){if(ef(e,"branch")){let r,{ref:i}=e.webviewItemValue;if(null==i.id)return;if(i.repoPath===this._graph?.repoPath)r=this._graph?.worktreesByBranch;else{let e=this.container.git.getRepository(i.repoPath);if(null==e)return;r=await (0,O.Ao)(e)}let s=r?.get(i.id);null!=s&&(0,Y.OH)(s.uri,t)}}openWorktreeInNewWindow(e){return this.openWorktree(e,{location:"newWindow"})}addAuthor(e){if(em(e,"contributor")){let{repoPath:t,name:r,email:i,current:s}=e.webviewItemValue;return c.s(t,new R.s(t,r,i,s??!1,0))}return Promise.resolve()}async toggleColumn(e,t){let r=this.container.storage.getWorkspace("graph:columns"),i=r?.[e];null!=i?i.isHidden=!t:i={isHidden:!t},r=(0,er.Y8)(r,e,i),await this.container.storage.storeWorkspace("graph:columns",r),this.notifyDidChangeColumns(),"changes"!==e||i.isHidden||this._graph?.includes?.stats||this.updateState()}columnAuthorOn(){return this.toggleColumn("author",!0)}columnAuthorOff(){return this.toggleColumn("author",!1)}columnDateTimeOn(){return this.toggleColumn("datetime",!0)}columnDateTimeOff(){return this.toggleColumn("datetime",!1)}columnShaOn(){return this.toggleColumn("sha",!0)}columnShaOff(){return this.toggleColumn("sha",!1)}columnChangesOn(){return this.toggleColumn("changes",!0)}columnChangesOff(){return this.toggleColumn("changes",!1)}columnGraphOn(){return this.toggleColumn("graph",!0)}columnGraphOff(){return this.toggleColumn("graph",!1)}columnMessageOn(){return this.toggleColumn("message",!0)}columnMessageOff(){return this.toggleColumn("message",!1)}columnRefOn(){return this.toggleColumn("ref",!0)}columnRefOff(){return this.toggleColumn("ref",!1)}async toggleScrollMarker(e,t){let r=U.H.get("graph.scrollMarkers.additionalTypes"),i=!1;t&&!r.includes(e)?(r=r.concat(e),i=!0):!t&&r.includes(e)&&(r=r.filter(t=>t!==e),i=!0),i&&(await U.H.updateEffective("graph.scrollMarkers.additionalTypes",r),this.notifyDidChangeScrollMarkers())}scrollMarkerLocalBranchOn(){return this.toggleScrollMarker("localBranches",!0)}scrollMarkerLocalBranchOff(){return this.toggleScrollMarker("localBranches",!1)}scrollMarkerRemoteBranchOn(){return this.toggleScrollMarker("remoteBranches",!0)}scrollMarkerRemoteBranchOff(){return this.toggleScrollMarker("remoteBranches",!1)}scrollMarkerStashOn(){return this.toggleScrollMarker("stashes",!0)}scrollMarkerStashOff(){return this.toggleScrollMarker("stashes",!1)}scrollMarkerTagOn(){return this.toggleScrollMarker("tags",!0)}scrollMarkerTagOff(){return this.toggleScrollMarker("tags",!1)}scrollMarkerPullRequestOn(){return this.toggleScrollMarker("pullRequests",!0)}scrollMarkerPullRequestOff(){return this.toggleScrollMarker("pullRequests",!1)}async setColumnMode(e,t){let r=this.container.storage.getWorkspace("graph:columns"),i=r?.[e];null!=i?i.mode=t:i={mode:t},r=(0,er.Y8)(r,e,i),await this.container.storage.storeWorkspace("graph:columns",r),this.notifyDidChangeColumns()}columnGraphCompact(){return this.setColumnMode("graph","compact")}columnGraphDefault(){return this.setColumnMode("graph",void 0)}async generateChangelogFrom(e){if(ef(e,"branch")||ef(e,"tag")){let{ref:t}=e.webviewItemValue;await (0,$.RS)("gitlens.ai.generateChangelog",{repoPath:t.repoPath,head:t,source:{source:"graph",detail:ef(e,"branch")?"branch":"tag"}})}return Promise.resolve()}async composeCommits(e){if(ef(e,"revision")){let{ref:t}=e.webviewItemValue;await (0,$.RS)("gitlens.composeCommits",{repoPath:t.repoPath,source:"graph"})}return Promise.resolve()}visualizeHistoryRepo(){(0,$.RS)("gitlens.visualizeHistory",null!=this.repository?{type:"repo",uri:this.repository.uri}:void 0)}getCommitFromGraphItemRef(e){let t=this.getGraphItemRef(e,"revision");return null!=t||null!=(t=this.getGraphItemRef(e,"stash"))?this.container.git.getRepositoryService(t.repoPath).commits.getCommit(t.ref):Promise.resolve(void 0)}getGraphItemRef(e,t){if(null==e){let e=this.activeSelection;return null!=e&&(null==t||t===e.refType)?e:void 0}switch(t){case"branch":return ef(e,"branch")||em(e,"upstreamStatus")?e.webviewItemValue.ref:void 0;case"revision":return ef(e,"revision")?e.webviewItemValue.ref:void 0;case"stash":return ef(e,"stash")?e.webviewItemValue.ref:void 0;case"tag":return ef(e,"tag")?e.webviewItemValue.ref:void 0;default:return ef(e)?e.webviewItemValue.ref:void 0}}getGraphItemRefs(e,t){if(null==e)return{active:void 0,selection:[]};switch(t){case"branch":if(!ef(e,"branch")&&!em(e,"upstreamStatus"))return{active:void 0,selection:[]};break;case"revision":if(!ef(e,"revision"))return{active:void 0,selection:[]};break;case"stash":if(!ef(e,"stash"))return{active:void 0,selection:[]};break;case"tag":if(!ef(e,"tag"))return{active:void 0,selection:[]};break;default:if(!ef(e))return{active:void 0,selection:[]}}let r=e.webviewItemsValues?.map(e=>e.webviewItemValue.ref)??[];return r.length||r.push(e.webviewItemValue.ref),{active:e.webviewItemValue.ref,selection:r}}createCancellation(e){this.cancelOperation(e);let t=new i.CancellationTokenSource;return this._cancellations.set(e,t),t}cancelOperation(e){this._cancellations.get(e)?.cancel(),this._cancellations.delete(e)}};function tf(e,t){return t??e.remote?{id:e.id,type:"remote",name:e.getNameWithoutRemote(),owner:e.getRemoteName()}:{id:e.id,type:"head",name:e.name}}function tv(e){if(null!=e.upstream&&!e.upstream.missing)return{id:(0,M.Yk)(e.repoPath,!0,e.upstream.name),type:"remote",name:(0,M.km)(e.upstream.name),owner:e.getRemoteName()}}function ty(e){switch(e.refType){case"branch":if(e.remote)return"remote";if(e.worktree)return"worktree";return"head";case"tag":return"tag";default:return}}function tw(e){return(0,er.x1)(e,(e,t)=>!!t.selected||void 0)}function tb(e,t,r){return t?.query!=null&&(r??=e.storage.get("graph:searchMode","normal"),t.query.filter="filter"===r),t}tl([(0,el.YQ)(eN)],GraphWebviewProvider.prototype,"onGetCounts",1),tl([(0,el.a1)(eT)],GraphWebviewProvider.prototype,"onUpdateGraphConfig",1),tl([(0,el.a1)(eB)],GraphWebviewProvider.prototype,"onUpdateGraphSearchMode",1),tl([(0,K.Yz)({args:!1})],GraphWebviewProvider.prototype,"onContextChanged",1),tl([(0,K.Yz)({args:!1})],GraphWebviewProvider.prototype,"onFeaturePreviewChanged",1),tl([(0,K.Yz)({args:{0:e=>e.toString()}})],GraphWebviewProvider.prototype,"onRepositoryChanged",1),tl([(0,K.Yz)({args:!1})],GraphWebviewProvider.prototype,"onRepositoryFileSystemChanged",1),tl([(0,K.Yz)({args:!1})],GraphWebviewProvider.prototype,"onSubscriptionChanged",1),tl([(0,el.a1)(eI)],GraphWebviewProvider.prototype,"onColumnsChanged",1),tl([(0,el.a1)(eO)],GraphWebviewProvider.prototype,"onRefsVisibilityChanged",1),tl([(0,el.a1)(eC)],GraphWebviewProvider.prototype,"onDoubleClick",1),tl([(0,el.YQ)(eY)],GraphWebviewProvider.prototype,"onHoverRowRequest",1),tl([(0,el.YQ)(eE),(0,K.Yz)()],GraphWebviewProvider.prototype,"onEnsureRowRequest",1),tl([(0,el.a1)(eP)],GraphWebviewProvider.prototype,"onGetMissingAvatars",1),tl([(0,el.a1)(eS)],GraphWebviewProvider.prototype,"onGetMissingRefMetadata",1),tl([(0,el.a1)(eG),(0,K.Yz)()],GraphWebviewProvider.prototype,"onGetMoreRows",1),tl([(0,el.a1)(eW),(0,K.Rm)()],GraphWebviewProvider.prototype,"onOpenPullRequestDetails",1),tl([(0,el.a1)(e_),(0,K.Rm)()],GraphWebviewProvider.prototype,"onRowAction",1),tl([(0,el.YQ)(ez),(0,K.Yz)()],GraphWebviewProvider.prototype,"onSearchHistoryGetRequest",1),tl([(0,el.YQ)(e$),(0,K.Yz)()],GraphWebviewProvider.prototype,"onSearchHistoryStoreRequest",1),tl([(0,el.YQ)(eU),(0,K.Yz)()],GraphWebviewProvider.prototype,"onSearchHistoryDeleteRequest",1),tl([(0,el.a1)(eD),(0,K.Yz)()],GraphWebviewProvider.prototype,"onSearchCancel",1),tl([(0,el.YQ)(ej),(0,K.Yz)()],GraphWebviewProvider.prototype,"onSearchRequest",1),tl([(0,el.a1)(ek)],GraphWebviewProvider.prototype,"onSearchOpenInView",1),tl([(0,el.a1)(eR)],GraphWebviewProvider.prototype,"onChooseRepository",1),tl([(0,el.YQ)(eq)],GraphWebviewProvider.prototype,"onChooseRef",1),tl([(0,el.YQ)(eA)],GraphWebviewProvider.prototype,"onChooseComparison",1),tl([(0,el.YQ)(eV)],GraphWebviewProvider.prototype,"onChooseAuthor",1),tl([(0,el.YQ)(eL)],GraphWebviewProvider.prototype,"onChooseFile",1),tl([(0,el.YQ)(ex)],GraphWebviewProvider.prototype,"onJumpToHead",1),tl([(0,el.a1)(eF)],GraphWebviewProvider.prototype,"onSelectionChanged",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"updateState",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"updateAvatars",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeAvatars",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeBranchState",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"updateRefsMetadata",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeRefsMetadata",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeColumns",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeScrollMarkers",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeRefsVisibility",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeConfiguration",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidFetch",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeRows",1),tl([(0,K.Yz)({args:!1})],GraphWebviewProvider.prototype,"notifyDidChangeRowsStats",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidStartFeaturePreview",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeWorkingTree",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeSelection",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeSubscription",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeOrgSettings",1),tl([(0,K.Yz)()],GraphWebviewProvider.prototype,"notifyDidChangeState",1),tl([tg("gitlens.graph.resetColumnsDefault")],GraphWebviewProvider.prototype,"resetColumnsDefault",1),tl([tg("gitlens.graph.resetColumnsCompact")],GraphWebviewProvider.prototype,"resetColumnsCompact",1),tl([(0,el.a1)(eH)],GraphWebviewProvider.prototype,"onUpdateIncludeOnlyRefs",1),tl([(0,el.a1)(eM)],GraphWebviewProvider.prototype,"onUpdateExcludedTypes",1),tl([tg("gitlens.fetch:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"fetch",1),tl([tg("gitlens.graph.pushWithForce"),(0,K.Rm)()],GraphWebviewProvider.prototype,"forcePush",1),tl([tg("gitlens.graph.pull"),(0,K.Rm)()],GraphWebviewProvider.prototype,"pull",1),tl([tg("gitlens.graph.push"),(0,K.Rm)()],GraphWebviewProvider.prototype,"push",1),tl([tg("gitlens.createBranch:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"createBranch",1),tl([tg("gitlens.graph.deleteBranch"),(0,K.Rm)()],GraphWebviewProvider.prototype,"deleteBranch",1),tl([tg("gitlens.star.branch:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"star",1),tl([tg("gitlens.unstar.branch:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"unstar",1),tl([tg("gitlens.graph.mergeBranchInto"),(0,K.Rm)()],GraphWebviewProvider.prototype,"mergeBranchInto",1),tl([tg("gitlens.graph.openBranchOnRemote"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openBranchOnRemote",1),tl([tg("gitlens.graph.copyRemoteBranchUrl")],GraphWebviewProvider.prototype,"copyRemoteBranchUrl",1),tl([tg("gitlens.publishBranch:graph"),(0,K.Rm)()],GraphWebviewProvider.prototype,"publishBranch",1),tl([tg("gitlens.graph.rebaseOntoBranch"),tg("gitlens.graph.rebaseOntoCommit"),(0,K.Rm)()],GraphWebviewProvider.prototype,"rebase",1),tl([tg("gitlens.graph.rebaseOntoUpstream"),(0,K.Rm)()],GraphWebviewProvider.prototype,"rebaseToRemote",1),tl([tg("gitlens.graph.renameBranch"),(0,K.Rm)()],GraphWebviewProvider.prototype,"renameBranch",1),tl([tg("gitlens.associateIssueWithBranch:graph"),(0,K.Rm)()],GraphWebviewProvider.prototype,"associateIssueWithBranch",1),tl([tg("gitlens.graph.cherryPick"),tg("gitlens.graph.cherryPick.multi"),(0,K.Rm)()],GraphWebviewProvider.prototype,"cherryPick",1),tl([tg("gitlens.graph.copy"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copy",1),tl([tg("gitlens.graph.copyMessage"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copyMessage",1),tl([tg("gitlens.graph.copySha"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copySha",1),tl([tg("gitlens.graph.showInDetailsView"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openInDetailsView",1),tl([tg("gitlens.graph.commitViaSCM"),(0,K.Rm)()],GraphWebviewProvider.prototype,"commitViaSCM",1),tl([tg("gitlens.graph.openCommitOnRemote"),tg("gitlens.graph.openCommitOnRemote.multi"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openCommitOnRemote",1),tl([tg("gitlens.graph.copyRemoteCommitUrl"),tg("gitlens.graph.copyRemoteCommitUrl.multi")],GraphWebviewProvider.prototype,"copyRemoteCommitUrl",1),tl([tg("gitlens.graph.compareSelectedCommits.multi"),(0,K.Rm)()],GraphWebviewProvider.prototype,"compareSelectedCommits",1),tl([tg("gitlens.pausedOperation.abort:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"abortPausedOperation",1),tl([tg("gitlens.pausedOperation.continue:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"continuePausedOperation",1),tl([tg("gitlens.pausedOperation.open:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openRebaseEditor",1),tl([tg("gitlens.pausedOperation.skip:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"skipPausedOperation",1),tl([tg("gitlens.pausedOperation.showConflicts:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"showConflicts",1),tl([tg("gitlens.graph.copyDeepLinkToBranch"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copyDeepLinkToBranch",1),tl([tg("gitlens.graph.copyDeepLinkToCommit"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copyDeepLinkToCommit",1),tl([tg("gitlens.graph.copyDeepLinkToRepo"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copyDeepLinkToRepo",1),tl([tg("gitlens.graph.copyDeepLinkToTag"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copyDeepLinkToTag",1),tl([tg("gitlens.graph.shareAsCloudPatch"),tg("gitlens.graph.createPatch"),tg("gitlens.createCloudPatch:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"shareAsCloudPatch",1),tl([tg("gitlens.copyPatchToClipboard:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copyPatchToClipboard",1),tl([tg("gitlens.graph.resetCommit"),(0,K.Rm)()],GraphWebviewProvider.prototype,"resetCommit",1),tl([tg("gitlens.graph.resetToCommit"),(0,K.Rm)()],GraphWebviewProvider.prototype,"resetToCommit",1),tl([tg("gitlens.graph.resetToTip"),(0,K.Rm)()],GraphWebviewProvider.prototype,"resetToTip",1),tl([tg("gitlens.graph.revert"),(0,K.Rm)()],GraphWebviewProvider.prototype,"revertCommit",1),tl([tg("gitlens.switchToBranch:"),tg("gitlens.graph.switchToCommit"),tg("gitlens.graph.switchToTag"),(0,K.Rm)()],GraphWebviewProvider.prototype,"switchTo",1),tl([tg("gitlens.graph.resetToTag"),(0,K.Rm)()],GraphWebviewProvider.prototype,"resetToTag",1),tl([tg("gitlens.graph.hideLocalBranch"),tg("gitlens.graph.hideRemoteBranch"),tg("gitlens.graph.hideTag"),(0,K.Rm)()],GraphWebviewProvider.prototype,"hideRef",1),tl([tg("gitlens.graph.hideRemote")],GraphWebviewProvider.prototype,"hideRemote",1),tl([tg("gitlens.graph.hideRefGroup")],GraphWebviewProvider.prototype,"hideRefGroup",1),tl([tg("gitlens.graph.soloBranch"),tg("gitlens.graph.soloTag"),(0,K.Rm)()],GraphWebviewProvider.prototype,"soloReference",1),tl([tg("gitlens.switchToAnotherBranch:graph"),(0,K.Rm)()],GraphWebviewProvider.prototype,"switchToAnother",1),tl([tg("gitlens.graph.undoCommit"),(0,K.Rm)()],GraphWebviewProvider.prototype,"undoCommit",1),tl([tg("gitlens.stashSave:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"saveStash",1),tl([tg("gitlens.stashApply:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"applyStash",1),tl([tg("gitlens.stashDelete:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"deleteStash",1),tl([tg("gitlens.stashRename:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"renameStash",1),tl([tg("gitlens.graph.createTag"),(0,K.Rm)()],GraphWebviewProvider.prototype,"createTag",1),tl([tg("gitlens.graph.deleteTag"),(0,K.Rm)()],GraphWebviewProvider.prototype,"deleteTag",1),tl([tg("gitlens.graph.createWorktree"),(0,K.Rm)()],GraphWebviewProvider.prototype,"createWorktree",1),tl([tg("gitlens.createPullRequest:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"createPullRequest",1),tl([tg("gitlens.openPullRequest:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openPullRequest",1),tl([tg("gitlens.openPullRequestChanges:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openPullRequestChanges",1),tl([tg("gitlens.openPullRequestComparison:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openPullRequestComparison",1),tl([tg("gitlens.openPullRequestOnRemote:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openPullRequestOnRemote",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"openIssueOnRemote",1),tl([tg("gitlens.graph.compareAncestryWithWorking"),(0,K.Rm)()],GraphWebviewProvider.prototype,"compareAncestryWithWorking",1),tl([tg("gitlens.graph.compareWithHead"),(0,K.Rm)()],GraphWebviewProvider.prototype,"compareHeadWith",1),tl([tg("gitlens.graph.compareBranchWithHead"),(0,K.Rm)()],GraphWebviewProvider.prototype,"compareBranchWithHead",1),tl([tg("gitlens.graph.compareWithMergeBase"),(0,K.Rm)()],GraphWebviewProvider.prototype,"compareWithMergeBase",1),tl([tg("gitlens.graph.openChangedFileDiffsWithMergeBase"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openChangedFileDiffsWithMergeBase",1),tl([tg("gitlens.graph.compareWithUpstream"),(0,K.Rm)()],GraphWebviewProvider.prototype,"compareWithUpstream",1),tl([tg("gitlens.changeUpstream:"),tg("gitlens.setUpstream:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"changeUpstreamBranch",1),tl([tg("gitlens.graph.compareWithWorking"),(0,K.Rm)()],GraphWebviewProvider.prototype,"compareWorkingWith",1),tl([tg("gitlens.views.selectForCompare:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"selectForCompare",1),tl([tg("gitlens.views.compareWithSelected:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"compareWithSelected",1),tl([tg("gitlens.copyWorkingChangesToWorktree:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"copyWorkingChangesToWorktree",1),tl([tg("gitlens.ai.generateCommitMessage:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"generateCommitMessage",1),tl([tg("gitlens.ai.explainUnpushed:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"aiExplainUnpushed",1),tl([tg("gitlens.ai.explainBranch:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"explainBranch",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"recomposeBranch",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"recomposeFromCommit",1),tl([tg("gitlens.recomposeBranch:")],GraphWebviewProvider.prototype,"recomposeBranchCommand",1),tl([tg("gitlens.composeCommits:")],GraphWebviewProvider.prototype,"composeCommitsCommand",1),tl([tg("gitlens.recomposeSelectedCommits:")],GraphWebviewProvider.prototype,"recomposeSelectedCommitsCommand",1),tl([tg("gitlens.recomposeFromCommit:")],GraphWebviewProvider.prototype,"recomposeFromCommitCommand",1),tl([tg("gitlens.ai.explainCommit:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"explainCommit",1),tl([tg("gitlens.ai.explainStash:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"explainStash",1),tl([tg("gitlens.ai.explainWip:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"explainWip",1),tl([tg("gitlens.graph.openChangedFiles"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openFiles",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"openAllChanges",1),tl([tg("gitlens.graph.openChangedFileDiffs")],GraphWebviewProvider.prototype,"openChangedFileDiffs",1),tl([tg("gitlens.graph.openChangedFileDiffsIndividually")],GraphWebviewProvider.prototype,"openChangedFileDiffsIndividually",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"openAllChangesWithWorking",1),tl([tg("gitlens.graph.openChangedFileDiffsWithWorking")],GraphWebviewProvider.prototype,"openChangedFileDiffsWithWorking",1),tl([tg("gitlens.graph.openChangedFileDiffsWithWorkingIndividually")],GraphWebviewProvider.prototype,"openChangedFileDiffsWithWorkingIndividually",1),tl([tg("gitlens.graph.openChangedFileRevisions"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openRevisions",1),tl([tg("gitlens.graph.openOnlyChangedFiles"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openOnlyChangedFiles",1),tl([tg("gitlens.graph.openInWorktree"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openInWorktree",1),tl([tg("gitlens.openWorktree:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"openWorktree",1),tl([tg("gitlens.openWorktreeInNewWindow:")],GraphWebviewProvider.prototype,"openWorktreeInNewWindow",1),tl([tg("gitlens.graph.addAuthor"),(0,K.Rm)()],GraphWebviewProvider.prototype,"addAuthor",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"toggleColumn",1),tl([tg("gitlens.graph.columnAuthorOn")],GraphWebviewProvider.prototype,"columnAuthorOn",1),tl([tg("gitlens.graph.columnAuthorOff")],GraphWebviewProvider.prototype,"columnAuthorOff",1),tl([tg("gitlens.graph.columnDateTimeOn")],GraphWebviewProvider.prototype,"columnDateTimeOn",1),tl([tg("gitlens.graph.columnDateTimeOff")],GraphWebviewProvider.prototype,"columnDateTimeOff",1),tl([tg("gitlens.graph.columnShaOn")],GraphWebviewProvider.prototype,"columnShaOn",1),tl([tg("gitlens.graph.columnShaOff")],GraphWebviewProvider.prototype,"columnShaOff",1),tl([tg("gitlens.graph.columnChangesOn")],GraphWebviewProvider.prototype,"columnChangesOn",1),tl([tg("gitlens.graph.columnChangesOff")],GraphWebviewProvider.prototype,"columnChangesOff",1),tl([tg("gitlens.graph.columnGraphOn")],GraphWebviewProvider.prototype,"columnGraphOn",1),tl([tg("gitlens.graph.columnGraphOff")],GraphWebviewProvider.prototype,"columnGraphOff",1),tl([tg("gitlens.graph.columnMessageOn")],GraphWebviewProvider.prototype,"columnMessageOn",1),tl([tg("gitlens.graph.columnMessageOff")],GraphWebviewProvider.prototype,"columnMessageOff",1),tl([tg("gitlens.graph.columnRefOn")],GraphWebviewProvider.prototype,"columnRefOn",1),tl([tg("gitlens.graph.columnRefOff")],GraphWebviewProvider.prototype,"columnRefOff",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"toggleScrollMarker",1),tl([tg("gitlens.graph.scrollMarkerLocalBranchOn")],GraphWebviewProvider.prototype,"scrollMarkerLocalBranchOn",1),tl([tg("gitlens.graph.scrollMarkerLocalBranchOff")],GraphWebviewProvider.prototype,"scrollMarkerLocalBranchOff",1),tl([tg("gitlens.graph.scrollMarkerRemoteBranchOn")],GraphWebviewProvider.prototype,"scrollMarkerRemoteBranchOn",1),tl([tg("gitlens.graph.scrollMarkerRemoteBranchOff")],GraphWebviewProvider.prototype,"scrollMarkerRemoteBranchOff",1),tl([tg("gitlens.graph.scrollMarkerStashOn")],GraphWebviewProvider.prototype,"scrollMarkerStashOn",1),tl([tg("gitlens.graph.scrollMarkerStashOff")],GraphWebviewProvider.prototype,"scrollMarkerStashOff",1),tl([tg("gitlens.graph.scrollMarkerTagOn")],GraphWebviewProvider.prototype,"scrollMarkerTagOn",1),tl([tg("gitlens.graph.scrollMarkerTagOff")],GraphWebviewProvider.prototype,"scrollMarkerTagOff",1),tl([tg("gitlens.graph.scrollMarkerPullRequestOn")],GraphWebviewProvider.prototype,"scrollMarkerPullRequestOn",1),tl([tg("gitlens.graph.scrollMarkerPullRequestOff")],GraphWebviewProvider.prototype,"scrollMarkerPullRequestOff",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"setColumnMode",1),tl([tg("gitlens.graph.columnGraphCompact")],GraphWebviewProvider.prototype,"columnGraphCompact",1),tl([tg("gitlens.graph.columnGraphDefault")],GraphWebviewProvider.prototype,"columnGraphDefault",1),tl([tg("gitlens.ai.generateChangelogFrom:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"generateChangelogFrom",1),tl([(0,K.Rm)()],GraphWebviewProvider.prototype,"composeCommits",1),tl([tg("gitlens.visualizeHistory.repo:"),(0,K.Rm)()],GraphWebviewProvider.prototype,"visualizeHistoryRepo",1)}};